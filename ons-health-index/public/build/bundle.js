var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function l(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function i(e){e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function h(){return d(" ")}function p(){return d("")}function f(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t){e.value=null==t?"":t}function y(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function w(e,t,n){e.classList[n?"add":"remove"](t)}class ${constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=u(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)a(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(i)}}let x;function b(e){x=e}function C(){const e=function(){if(!x)throw new Error("Function called outside component initialization");return x}();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach((t=>{t.call(e,l)}))}}}const q=[],N=[],_=[],k=[],T=Promise.resolve();let H=!1;function L(e){_.push(e)}let A=!1;const j=new Set;function E(){if(!A){A=!0;do{for(let e=0;e<q.length;e+=1){const t=q[e];b(t),O(t.$$)}for(b(null),q.length=0;N.length;)N.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];j.has(t)||(j.add(t),t())}_.length=0}while(q.length);for(;k.length;)k.pop()();H=!1,A=!1,j.clear()}}function O(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const P=new Set;let S;function R(e,t){e&&e.i&&(P.delete(e),e.i(t))}function D(e,t,n,r){if(e&&e.o){if(P.has(e))return;P.add(e),S.c.push((()=>{P.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function z(e){e&&e.c()}function I(e,n,s,o){const{fragment:a,on_mount:i,on_destroy:c,after_update:u}=e.$$;a&&a.m(n,s),o||L((()=>{const n=i.map(t).filter(l);c?c.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(L)}function U(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function M(e,t){-1===e.$$.dirty[0]&&(q.push(e),H||(H=!0,T.then(E)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function B(t,l,s,o,a,c,u=[-1]){const d=x;b(t);const h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:l.context||[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if(h.ctx=s?s(t,l.props||{},((e,n,...r)=>{const l=r.length?r[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=l)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](l),p&&M(t,e)),n})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!o&&o(h.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);h.fragment&&h.fragment.l(e),e.forEach(i)}else h.fragment&&h.fragment.c();l.intro&&R(t.$$.fragment),I(t,l.target,l.anchor,l.customElement),E()}b(d)}class F{$destroy(){U(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var V={},W={};function Z(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function J(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function K(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function G(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),l=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+K(-t,6):t>9999?"+"+K(t,6):K(t,4))+"-"+K(e.getUTCMonth()+1,2)+"-"+K(e.getUTCDate(),2)+(s?"T"+K(n,2)+":"+K(r,2)+":"+K(l,2)+"."+K(s,3)+"Z":l?"T"+K(n,2)+":"+K(r,2)+":"+K(l,2)+"Z":r||n?"T"+K(n,2)+":"+K(r,2)+"Z":"")}var X=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,l=[],s=e.length,o=0,a=0,i=s<=0,c=!1;function u(){if(i)return W;if(c)return c=!1,V;var t,r,l=o;if(34===e.charCodeAt(l)){for(;o++<s&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=s?i=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(l+1,t-1).replace(/""/g,'"')}for(;o<s;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(l,t)}return i=!0,e.slice(l,s)}for(10===e.charCodeAt(s-1)&&--s,13===e.charCodeAt(s-1)&&--s;(r=u())!==W;){for(var d=[];r!==V&&r!==W;)d.push(r),r=u();t&&null==(d=t(d,a++))||l.push(d)}return l}function l(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function s(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?G(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,l,s=r(e,(function(e,r){if(n)return n(e,r-1);l=e,n=t?function(e,t){var n=Z(e);return function(r,l){return t(n(r),l,e)}}(e,t):Z(e)}));return s.columns=l||[],s},parseRows:r,format:function(t,n){return null==n&&(n=J(t)),[n.map(o).join(e)].concat(l(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=J(e)),l(e,t).join("\n")},formatRows:function(e){return e.map(s).join("\n")},formatRow:s,formatValue:o}}(",").parse;function Y(e){for(var t in e){var n,r,l=e[t].trim();if(l)if("true"===l)l=!0;else if("false"===l)l=!1;else if("NaN"===l)l=NaN;else if(isNaN(n=+l)){if(!(r=l.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Q&&r[4]&&!r[7]&&(l=l.replace(/-/g,"/").replace(/T/," ")),l=new Date(l)}else l=n;else l=null;e[t]=l}return e}const Q=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();const ee="https://raw.githubusercontent.com/theojolliffe/healthindexlads/main/csv/includedHealthAreas.csv",te="https://raw.githubusercontent.com/ONSvisual/census-data/main/json/place/",ne="https://raw.githubusercontent.com/theojolliffe/healthindexlads/main/json/",re="https://raw.githubusercontent.com/ONSvisual/census-data/main/json/quantiles/quartiles_",le={ew:{name:"",pl:""},wd:{name:"Ward",pl:"Wards"},lad:{name:"District",pl:"Districts"},"Upper Tier Local Authority":{name:"Local Authority",pl:"Local Authorities"},rgn:{name:"Region",pl:"Regions"},ctry:{name:"Country",pl:"Countries"}};function se(e,t,n){const r=e.slice();return r[32]=t[n],r[35]=t,r[34]=n,r}function oe(e,t,n){const r=e.slice();return r[32]=t[n],r[33]=t,r[34]=n,r}function ae(e){let t,n,r,l,s,c,p,v=(e[0]?e[0]:"Select one")+"";return{c(){t=u("a"),n=u("span"),r=d(v),l=h(),s=u("span"),s.textContent=" ",m(n,"class","svelte-qdzmwx"),m(s,"class","button svelte-qdzmwx"),w(s,"search",e[3]),w(s,"down",!e[3]),m(t,"id","toggle"),m(t,"class","svelte-qdzmwx")},m(i,u){a(i,t,u),o(t,n),o(n,r),o(t,l),o(t,s),c||(p=f(t,"click",e[12]),c=!0)},p(e,t){1&t[0]&&v!==(v=(e[0]?e[0]:"Select one")+"")&&g(r,v),8&t[0]&&w(s,"search",e[3]),8&t[0]&&w(s,"down",!e[3])},d(e){e&&i(t),c=!1,p()}}}function ie(e){let t,n,l,s,c,p,v,y,w=e[6][e[1]]+"",$=e[2]&&ce(e);return{c(){t=u("a"),n=u("span"),l=d(w),s=h(),$&&$.c(),c=h(),p=u("span"),p.textContent=" ",m(n,"class","selection svelte-qdzmwx"),m(p,"class","button close svelte-qdzmwx"),m(t,"id","toggle"),m(t,"class","selected svelte-qdzmwx")},m(r,i){a(r,t,i),o(t,n),o(n,l),o(n,s),$&&$.m(n,null),o(t,c),o(t,p),v||(y=[f(p,"click",e[14]),f(t,"click",e[12])],v=!0)},p(e,t){66&t[0]&&w!==(w=e[6][e[1]]+"")&&g(l,w),e[2]?$?$.p(e,t):($=ce(e),$.c(),$.m(n,null)):$&&($.d(1),$=null)},d(e){e&&i(t),$&&$.d(),v=!1,r(y)}}}function ce(e){let t,n,r=e[6][e[2]]+"";return{c(){t=u("small"),n=d(r),m(t,"class","svelte-qdzmwx")},m(e,r){a(e,t,r),o(t,n)},p(e,t){68&t[0]&&r!==(r=e[6][e[2]]+"")&&g(n,r)},d(e){e&&i(t)}}}function ue(e){let t,n,l,s,c,d;function p(e,t){return e[4].length<3?fe:e[9][0]&&e[2]?pe:e[9][0]?he:de}let g=p(e),w=g(e);return{c(){t=u("div"),n=u("input"),l=h(),s=u("ul"),w.c(),m(n,"type","text"),m(n,"placeholder",""),m(n,"autocomplete","false"),m(n,"class","svelte-qdzmwx"),m(s,"class","svelte-qdzmwx"),m(t,"id","dropdown"),y(t,"top","0"),m(t,"class","svelte-qdzmwx")},m(r,i){a(r,t,i),o(t,n),v(n,e[4]),e[23](n),o(t,l),o(t,s),w.m(s,null),e[30](t),c||(d=[f(n,"input",e[22]),f(n,"keyup",e[16])],c=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&v(n,e[4]),g===(g=p(e))&&w?w.p(e,t):(w.d(1),w=g(e),w&&(w.c(),w.m(s,null)))},d(n){n&&i(t),e[23](null),w.d(),e[30](null),c=!1,r(d)}}}function de(t){let n;return{c(){n=u("li"),n.textContent="No results",m(n,"class","svelte-qdzmwx")},m(e,t){a(e,n,t)},p:e,d(e){e&&i(n)}}}function he(e){let t,n=e[9],r=[];for(let t=0;t<n.length;t+=1)r[t]=me(se(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=p()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);a(e,t,n)},p(e,l){if(11010&l[0]){let s;for(n=e[9],s=0;s<n.length;s+=1){const o=se(e,n,s);r[s]?r[s].p(o,l):(r[s]=me(o),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){c(r,e),e&&i(t)}}}function pe(e){let t,n=e[9],r=[];for(let t=0;t<n.length;t+=1)r[t]=ge(oe(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=p()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);a(e,t,n)},p(e,l){if(11014&l[0]){let s;for(n=e[9],s=0;s<n.length;s+=1){const o=oe(e,n,s);r[s]?r[s].p(o,l):(r[s]=ge(o),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){c(r,e),e&&i(t)}}}function fe(t){let n;return{c(){n=u("li"),n.textContent="Type a name...",m(n,"class","svelte-qdzmwx")},m(e,t){a(e,n,t)},p:e,d(e){e&&i(n)}}}function me(e){let t,n,l,s,c,p=e[32][e[1]]+"",v=e[34];function y(){return e[27](e[32])}function $(){return e[28](e[34])}const x=()=>e[29](t,v),b=()=>e[29](null,v);return{c(){t=u("li"),n=d(p),l=h(),m(t,"class","svelte-qdzmwx"),w(t,"highlight",e[8]==e[34])},m(e,r){a(e,t,r),o(t,n),o(t,l),x(),s||(c=[f(t,"click",y),f(t,"mouseover",$)],s=!0)},p(r,l){e=r,514&l[0]&&p!==(p=e[32][e[1]]+"")&&g(n,p),v!==e[34]&&(b(),v=e[34],x()),256&l[0]&&w(t,"highlight",e[8]==e[34])},d(e){e&&i(t),b(),s=!1,r(c)}}}function ge(e){let t,n,l,s,c,p,v,y,$=e[32][e[1]]+"",x=e[32][e[2]]+"",b=e[34];function C(){return e[24](e[32])}function q(){return e[25](e[34])}const N=()=>e[26](t,b),_=()=>e[26](null,b);return{c(){t=u("li"),n=d($),l=h(),s=u("small"),c=d(x),p=h(),m(s,"class","svelte-qdzmwx"),m(t,"class","svelte-qdzmwx"),w(t,"highlight",e[8]==e[34])},m(e,r){a(e,t,r),o(t,n),o(t,l),o(t,s),o(s,c),o(t,p),N(),v||(y=[f(t,"click",C),f(t,"mouseover",q)],v=!0)},p(r,l){e=r,514&l[0]&&$!==($=e[32][e[1]]+"")&&g(n,$),516&l[0]&&x!==(x=e[32][e[2]]+"")&&g(c,x),b!==e[34]&&(_(),b=e[34],N()),256&l[0]&&w(t,"highlight",e[8]==e[34])},d(e){e&&i(t),_(),v=!1,r(y)}}}function ve(t){let n,r,l,s;function c(e,t){return e[6]&&!e[3]?ie:ae}let d=c(t),p=d(t),g=t[7]&&ue(t);return{c(){n=u("div"),p.c(),r=h(),g&&g.c(),m(n,"id","select"),m(n,"class","svelte-qdzmwx"),w(n,"active",t[7])},m(e,i){a(e,n,i),p.m(n,null),o(n,r),g&&g.m(n,null),l||(s=f(n,"keydown",t[15]),l=!0)},p(e,t){d===(d=c(e))&&p?p.p(e,t):(p.d(1),p=d(e),p&&(p.c(),p.m(n,r))),e[7]?g?g.p(e,t):(g=ue(e),g.c(),g.m(n,null)):g&&(g.d(1),g=null),128&t[0]&&w(n,"active",e[7])},i:e,o:e,d(e){e&&i(n),p.d(),g&&g.d(),l=!1,s()}}}function ye(e,t,n){let r;const l=C();let s,o,a,{options:i}=t,{selected:c=null}=t,{placeholder:u="Find an area..."}=t,{value:d="code"}=t,{label:h="name"}=t,{group:p=null}=t,{search:f=!1}=t,m=c,g=c?i.find((e=>{e[d],c[d]})):null,v=!1,y="",w=null,$=[];function x(e){n(17,c=e),n(7,v=!1),l("select",{selected:e,value:e[d]})}return e.$$set=e=>{"options"in e&&n(18,i=e.options),"selected"in e&&n(17,c=e.selected),"placeholder"in e&&n(0,u=e.placeholder),"value"in e&&n(19,d=e.value),"label"in e&&n(1,h=e.label),"group"in e&&n(2,p=e.group),"search"in e&&n(3,f=e.search)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(21,r=y?new RegExp(y,"i"):null),2359298&e.$$.dirty[0]&&(n(9,s=r?i.filter((e=>r.test(e[h]))):i),n(8,w=0)),32&e.$$.dirty[0]&&(document.onclick=function(e){e.target!==o&&(n(7,v=!1),n(8,w=0))}),1966080&e.$$.dirty[0]&&m!=c&&(n(6,g=i.find((e=>e[d]==c[d]))),n(20,m=c))},[u,h,p,f,y,o,g,v,w,s,a,$,function(e){var t;e.stopPropagation(),n(4,y=""),n(7,v=!v),(t=10,new Promise((e=>setTimeout(e,t)))).then((()=>{a&&v&&a.focus()}))},x,function(e){e.stopPropagation(),n(17,c=null),n(20,m=null),n(6,g=null),l("select",{selected:null,value:null})},function(e){v&&s[0]&&Number.isInteger(w)&&(38===e.keyCode?(n(8,w-=w>0?1:0),$[w].scrollIntoView({block:"nearest",inline:"start"})):40===e.keyCode&&(n(8,w+=w<s.length-1?1:0),$[w].scrollIntoView({block:"nearest",inline:"end"})))},function(e){s[0]&&Number.isInteger(w)&&13===e.keyCode&&x(s[w])},c,i,d,m,r,function(){y=this.value,n(4,y)},function(e){N[e?"unshift":"push"]((()=>{a=e,n(10,a)}))},e=>x(e),e=>n(8,w=e),function(e,t){N[e?"unshift":"push"]((()=>{$[t]=e,n(11,$)}))},e=>x(e),e=>n(8,w=e),function(e,t){N[e?"unshift":"push"]((()=>{$[t]=e,n(11,$)}))},function(e){N[e?"unshift":"push"]((()=>{o=e,n(5,o)}))}]}class we extends F{constructor(e){super(),B(this,e,ye,ve,s,{options:18,selected:17,placeholder:0,value:19,label:1,group:2,search:3},[-1,-1])}}function $e(t){let n;return{c(){n=u("div"),n.innerHTML="<strong>Warning!</strong> This is a prototype. Data likely to contain inaccuracies.",m(n,"class","warning svelte-srzfvi")},m(e,t){a(e,n,t)},p:e,i:e,o:e,d(e){e&&i(n)}}}class xe extends F{constructor(e){super(),B(this,e,null,$e,s,{})}}function be(e){let t,n=e[3](e[0])+"";return{c(){t=u("p")},m(e,r){a(e,t,r),t.innerHTML=n},p(e,r){1&r&&n!==(n=e[3](e[0])+"")&&(t.innerHTML=n)},d(e){e&&i(t)}}}function Ce(t){let n,r,l,s,c,d,g=t[1]&&be(t);return{c(){n=u("script"),l=h(),g&&g.c(),s=p(),n.src!==(r="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")&&m(n,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(e,r){o(document.head,n),a(e,l,r),g&&g.m(e,r),a(e,s,r),c||(d=f(n,"load",t[2]),c=!0)},p(e,[t]){e[1]?g?g.p(e,t):(g=be(e),g.c(),g.m(s.parentNode,s)):g&&(g.d(1),g=null)},i:e,o:e,d(e){i(n),e&&i(l),g&&g.d(e),e&&i(s),c=!1,d()}}}function qe(e,t,n){let{place:r}=t,l={0:"Loading"},s=!1;return e.$$set=e=>{"place"in e&&n(0,r=e.place)},[r,s,()=>{n(1,s=!0)},function(e){let t=e.priority2018.Highest.map((e=>(e.pos="improvement",e))),n=e.priority2018.Lowest.map((e=>(e.pos="decline",e))),r=t.concat(n).filter((e=>"Subdomain"==e["Index level"]));return r.sort((function(e,t){return e.hlRank-t.hlRank})),console.log("place",r),l=rosaenlg_en_US.render("\nmixin intro\n    synz\n        syn\n            | Barnet saw England’s\n\nmixin firstSen(i)\n    | Barnet saw England’s\n    | #[+value(subDomain[i].hlRank, {'ORDINAL_TEXTUAL':true})] greatest #[+value(subDomain[i].pos)]\n    | in #[+value((subDomain[i].Measure).toLowerCase())]\n    | in the three years between 2015 and 2018. \n\nmixin secondSen(i)\n    | During this period, the subdomain increased from #[+value(subDomain[i].value - subDomain[i].Change3year)] to #[+value(subDomain[i].value)] giving this area England's fifth highest score.\n\nmixin lastSen(i)\n    | This change was largely driven by improvements in #[+value((indicators[i][0].indi).toLowerCase())] \n    | (index increased by #[+value(indicators[i][0][2018].Change3year)]) and \n    | #[+value((indicators[i][1].indi).toLowerCase())] \n    | (#[+value(indicators[i][1][2018].Change3year, {'FORMAT': '+0.0'})]), \n    | however there was a decline in #[+value((indicators[i][indicators[i].length-1].indi).toLowerCase())]\n    | (#[+value(indicators[i][indicators[i].length-1][2018].Change3year, {'FORMAT': '+0.0'})]).\n\nmixin para(i)\n    p #[+firstSen(i)]\n    p #[+secondSen(i)] \n    p #[+lastSen(i)]\n\np #[+para(0)]\np #[+para(1)]\np #[+para(2)]\np #[+para(3)]\n",{language:"en_UK",subDomain:r,indicators:function(e){let t=[];for(let n=0;n<r.length;n++){let l=e[r[n].Domain].subdomains[r[n].Subdomain].indicators,s=[];for(const[e,t]of Object.entries(l))t.indi=e,s.push({}),s[s.length-1]=t;s.sort((function(e,t){return t[2018].Change3year-e[2018].Change3year})),t.push(s)}return console.log("objArr",t),t}(e.data)}),l}]}class Ne extends F{constructor(e){super(),B(this,e,qe,Ce,s,{place:0})}}const _e=e=>{if(e<10)return["","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth"][e];const t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"};function ke(e){if(e<10)return["","","second","third","fourth","fifth","sixth","seventh","eighth","ninth"][e];var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"}let Te={};[{varCode:"ranking_1_sent",comment:"TOTAL POPULATION",template:"{Current?:{Change1year?Between 2017 and 2018,:In the three years from 2015 to 2018,}}{firstPara? {ladName}:{Current?This area: this area}} {Current?has:saw} England's {ordinalSuffix} {Current?highest score for:{rankIsNegative?greatest decline:greatest improvement in}} {measure}."},{varCode:"domain_1_sent",comment:"POPULATION CHANGE",template:"Barnet has a health index score of 100, the 32nd healthiest district in England."},{varCode:"domain_2_sent",comment:"PROPORTION OVER 65",template:"Barnet's overall health has improved since scoring 99 in 2015."}].forEach((e=>{Te[e.varCode]=e.template}));let He=!0;function Le(e,t,n,r){let l=e;for(let e=0;e<n.length;e++)l=l[n[e]];let s=function(e,t){let n;"data"==t[0]&&("Overall"==t[1]?n="overall health":"Healthy Places"==t[1]?n="environmental factors associated with health":"Healthy Lives"==t[1]?n="health-related behaviours":"Healthy People"==t[1]&&(n="health outcomes"));"priority2018"==t[0]&&(n=e.Measure.toLowerCase());return n}(l,n);return((e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);let n=1,r=e.charAt(0);const l=function(){return r},s=function(t){throw JSON.stringify({name:"Robo-journalist error",message:t,at:n,text:e})},o=function(t){return t&&t!==r&&s("Expected '"+t+"' instead of '"+r+"'"),r=e.charAt(n),n+=1,r},a=function(e){return e in t||s(`${e} is not a key of the data dictionary.`),t[e]},i=function(e){const t=e.split(" "),n={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"<":(e,t)=>e<t,">":(e,t)=>e>t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t},r=[];for(const e of t)if(/^-?\d+$/.test(e))r.push(Number(e));else if(e in n){const t=Number(r.pop()),l=Number(r.pop());r.push(n[e](l,t))}else if("~abs"===e)r[r.length-1]=Math.abs(r[r.length-1]);else if("~ord"===e)r[r.length-1]=_e(Number(r[r.length-1]));else if("~ord'"===e){let e=_e(Number(r.pop()));"first"===e?e="":e+=" ",r.push(e)}else"^"===e.charAt(0)?r[r.length-1]=a(e.slice(1))(r[r.length-1]):r.push(a(e));return 1!==r.length&&s("Invalid RPN"),r[0]},c=function(e){o("?");const t=d();o(":");const n=d();return o("}"),e?t:n},u=function(){if(o("{"),":"===r)return o(":"),o("}"),":";let e="";for(;l();){if("}"===r)return o("}"),i(e);if("?"===r)return c(i(e));e+=r,o()}s("Braces not closed")},d=function(){let e="";for(;l();){if(":"===r||"}"===r)return e;"{"!==r?(e+=r,o()):e+=u()}return e},h=d();return""!==r&&s(`Didn't expect '${r}'`),h})(Te.ranking_1_sent,{Change1year:Ae(l,n,"Change1year"),Change3year:Ae(l,n,"Change3year"),Current:Ae(l,n,"Current"),firstPara:0==r|3==r,ladName:e.name,ordinalSuffix:ke("data"==n[0]?l.Rank:l.hlRank),rankIsNegative:"Lowest"==n[1],regionName:"London",londonOrWales:!1,measure:s,intro:He})}function Ae(e,t,n){let r;return"priority2018"==t[0]&&("Current"==n&&(e.hlRankType.includes("Change")||(He=!(1==He),r=!0)),e.hlRankType.includes(n)?(He=!(1==He),r=!0):r=!1),"data"==t[0]&&("Current"==n?(He=!(1==He),r=!0):r=!1),r}function je(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}function Ee(e,t,n){const r=e.slice();return r[17]=t[n],r[16]=n,r}function Oe(e){let t,n,r,l,s,c,p,f,v,w,$,x,b,C,q,_,T,H,L,A,j,E,O,P,S,M,B,F,V,W,Z,J,K,G,X,Y,Q,ee,te,ne,re,le,se,oe,ae,ie,ce,ue,de,he,pe,fe,me,ge,ve,ye,$e,xe,be,Ce,qe,_e,ke,Te,He,Ae,je,Ee,Oe,Se,ze,Ie,Ue,Me,Be,Fe,Ve,We,Ze,Je,Ke,Ge,Xe,Ye,Qe,et,tt,nt,rt,lt,st=e[3].name+"",ot=e[2].name+"",at=e[2].data.Overall.total[2018].value+"",it=Le(e[2],0,["data","Overall","total","2018"],0)+"",ct=e[2].data["Healthy Lives"].total[2018].value+"",ut=Le(e[2],0,["data","Healthy Lives","total","2018"],1)+"",dt=e[2].data["Healthy People"].total[2018].value+"",ht=Le(e[2],0,["data","Healthy People","total","2018"],2)+"",pt=e[2].data["Healthy Places"].total[2018].value+"",ft=Le(e[2],0,["data","Healthy Places","total","2018"],3)+"",mt=Le(e[2],0,["priority2018","Highest",0],0)+"",gt=Le(e[2],0,["priority2018","Highest",1],1)+"",vt=Le(e[2],0,["priority2018","Highest",2],2)+"",yt=Le(e[2],0,["priority2018","Lowest",3],3)+"",wt=Le(e[2],0,["priority2018","Lowest",4],4)+"",$t=Le(e[2],0,["priority2018","Lowest",5],5)+"",xt=e[3].parents[0]&&Pe(e),bt=e[3].parents[0]&&Re(e);function Ct(t){e[8](t)}let qt={options:e[0],group:"typenm",search:!0};void 0!==e[1]&&(qt.selected=e[1]),_=new we({props:qt}),N.push((()=>function(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}(_,"selected",Ct))),_.$on("select",e[9]),E=new Ne({props:{place:e[2]}});let Nt=e[3].children[0]&&De(e);return{c(){t=u("div"),n=u("div"),xt&&xt.c(),r=h(),l=d(st),s=h(),c=u("div"),p=u("div"),f=u("span"),v=d("Health Index:  "),w=d(ot),$=u("br"),x=h(),bt&&bt.c(),b=h(),C=u("div"),q=u("div"),z(_.$$.fragment),H=h(),L=u("div"),A=u("br"),j=h(),z(E.$$.fragment),O=h(),P=u("hr"),S=h(),M=u("div"),B=u("h3"),F=d("Health index: "),V=d(at),W=h(),Z=u("div"),J=u("p"),K=d(it),G=h(),X=u("div"),Y=u("h4"),Q=d("Healthy Lives: "),ee=d(ct),te=h(),ne=u("div"),re=u("p"),le=d(ut),se=h(),oe=u("div"),ae=u("h4"),ie=d("Healthy People: "),ce=d(dt),ue=h(),de=u("div"),he=u("p"),pe=d(ht),fe=h(),me=u("div"),ge=u("h4"),ve=d("Healthy Places: "),ye=d(pt),$e=h(),xe=u("div"),be=u("p"),Ce=d(ft),qe=h(),_e=u("hr"),ke=h(),Te=u("div"),He=u("p"),Ae=d(mt),je=h(),Ee=u("div"),Oe=u("p"),Se=d(gt),ze=h(),Ie=u("div"),Ue=u("p"),Me=d(vt),Be=h(),Fe=u("div"),Ve=u("p"),We=d(yt),Ze=h(),Je=u("div"),Ke=u("p"),Ge=d(wt),Xe=h(),Ye=u("div"),Qe=u("p"),et=d($t),tt=h(),Nt&&Nt.c(),nt=h(),rt=u("div"),rt.innerHTML='<div><img src="https://onsvisual.github.io/svelte-scrolly/img/ons-logo-pos-en.svg" alt="Office for National Statistics" class="svelte-2qp4su"/></div> \n\t<div class="right svelte-2qp4su"><span class="text-small svelte-2qp4su">Source: Census 2011, with change +/- from Census 2001.</span></div>',m(n,"class","text-small svelte-2qp4su"),m(t,"class","grid svelte-2qp4su"),m(f,"class","text-big svelte-2qp4su"),y(q,"width","240px"),y(q,"float","right"),m(c,"class","grid-2 svelte-2qp4su"),m(B,"class","svelte-2qp4su"),m(J,"class","svelte-2qp4su"),m(Z,"class","svelte-2qp4su"),m(Y,"class","svelte-2qp4su"),m(re,"class","svelte-2qp4su"),m(ne,"class","svelte-2qp4su"),m(ae,"class","svelte-2qp4su"),m(he,"class","svelte-2qp4su"),m(de,"class","svelte-2qp4su"),m(ge,"class","svelte-2qp4su"),m(be,"class","svelte-2qp4su"),m(xe,"class","svelte-2qp4su"),m(He,"class","svelte-2qp4su"),m(Te,"class","svelte-2qp4su"),m(Oe,"class","svelte-2qp4su"),m(Ee,"class","svelte-2qp4su"),m(Ue,"class","svelte-2qp4su"),m(Ie,"class","svelte-2qp4su"),m(Ve,"class","svelte-2qp4su"),m(Fe,"class","svelte-2qp4su"),m(Ke,"class","svelte-2qp4su"),m(Je,"class","svelte-2qp4su"),m(Qe,"class","svelte-2qp4su"),m(Ye,"class","svelte-2qp4su"),m(L,"class","profile-grid mt svelte-2qp4su"),m(rt,"class","grid-2 mt svelte-2qp4su")},m(e,i){a(e,t,i),o(t,n),xt&&xt.m(n,null),o(n,r),o(n,l),a(e,s,i),a(e,c,i),o(c,p),o(p,f),o(f,v),o(f,w),o(p,$),o(p,x),bt&&bt.m(p,null),o(c,b),o(c,C),o(C,q),I(_,q,null),a(e,H,i),a(e,L,i),o(L,A),o(L,j),I(E,L,null),o(L,O),o(L,P),o(L,S),o(L,M),o(M,B),o(B,F),o(B,V),o(L,W),o(L,Z),o(Z,J),o(J,K),o(L,G),o(L,X),o(X,Y),o(Y,Q),o(Y,ee),o(L,te),o(L,ne),o(ne,re),o(re,le),o(L,se),o(L,oe),o(oe,ae),o(ae,ie),o(ae,ce),o(L,ue),o(L,de),o(de,he),o(he,pe),o(L,fe),o(L,me),o(me,ge),o(ge,ve),o(ge,ye),o(L,$e),o(L,xe),o(xe,be),o(be,Ce),o(L,qe),o(L,_e),o(L,ke),o(L,Te),o(Te,He),o(He,Ae),o(L,je),o(L,Ee),o(Ee,Oe),o(Oe,Se),o(L,ze),o(L,Ie),o(Ie,Ue),o(Ue,Me),o(L,Be),o(L,Fe),o(Fe,Ve),o(Ve,We),o(L,Ze),o(L,Je),o(Je,Ke),o(Ke,Ge),o(L,Xe),o(L,Ye),o(Ye,Qe),o(Qe,et),a(e,tt,i),Nt&&Nt.m(e,i),a(e,nt,i),a(e,rt,i),lt=!0},p(e,t){e[3].parents[0]?xt?xt.p(e,t):(xt=Pe(e),xt.c(),xt.m(n,r)):xt&&(xt.d(1),xt=null),(!lt||8&t)&&st!==(st=e[3].name+"")&&g(l,st),(!lt||4&t)&&ot!==(ot=e[2].name+"")&&g(w,ot),e[3].parents[0]?bt?bt.p(e,t):(bt=Re(e),bt.c(),bt.m(p,null)):bt&&(bt.d(1),bt=null);const s={};var o;1&t&&(s.options=e[0]),!T&&2&t&&(T=!0,s.selected=e[1],o=()=>T=!1,k.push(o)),_.$set(s);const a={};4&t&&(a.place=e[2]),E.$set(a),(!lt||4&t)&&at!==(at=e[2].data.Overall.total[2018].value+"")&&g(V,at),(!lt||4&t)&&it!==(it=Le(e[2],0,["data","Overall","total","2018"],0)+"")&&g(K,it),(!lt||4&t)&&ct!==(ct=e[2].data["Healthy Lives"].total[2018].value+"")&&g(ee,ct),(!lt||4&t)&&ut!==(ut=Le(e[2],0,["data","Healthy Lives","total","2018"],1)+"")&&g(le,ut),(!lt||4&t)&&dt!==(dt=e[2].data["Healthy People"].total[2018].value+"")&&g(ce,dt),(!lt||4&t)&&ht!==(ht=Le(e[2],0,["data","Healthy People","total","2018"],2)+"")&&g(pe,ht),(!lt||4&t)&&pt!==(pt=e[2].data["Healthy Places"].total[2018].value+"")&&g(ye,pt),(!lt||4&t)&&ft!==(ft=Le(e[2],0,["data","Healthy Places","total","2018"],3)+"")&&g(Ce,ft),(!lt||4&t)&&mt!==(mt=Le(e[2],0,["priority2018","Highest",0],0)+"")&&g(Ae,mt),(!lt||4&t)&&gt!==(gt=Le(e[2],0,["priority2018","Highest",1],1)+"")&&g(Se,gt),(!lt||4&t)&&vt!==(vt=Le(e[2],0,["priority2018","Highest",2],2)+"")&&g(Me,vt),(!lt||4&t)&&yt!==(yt=Le(e[2],0,["priority2018","Lowest",3],3)+"")&&g(We,yt),(!lt||4&t)&&wt!==(wt=Le(e[2],0,["priority2018","Lowest",4],4)+"")&&g(Ge,wt),(!lt||4&t)&&$t!==($t=Le(e[2],0,["priority2018","Lowest",5],5)+"")&&g(et,$t),e[3].children[0]?Nt?Nt.p(e,t):(Nt=De(e),Nt.c(),Nt.m(nt.parentNode,nt)):Nt&&(Nt.d(1),Nt=null)},i(e){lt||(R(_.$$.fragment,e),R(E.$$.fragment,e),lt=!0)},o(e){D(_.$$.fragment,e),D(E.$$.fragment,e),lt=!1},d(e){e&&i(t),xt&&xt.d(),e&&i(s),e&&i(c),bt&&bt.d(),U(_),e&&i(H),e&&i(L),U(E),e&&i(tt),Nt&&Nt.d(e),e&&i(nt),e&&i(rt)}}}function Pe(e){let t,n=e[3].parents.reverse(),r=[];for(let t=0;t<n.length;t+=1)r[t]=Se(Ee(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=p()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);a(e,t,n)},p(e,l){if(40&l){let s;for(n=e[3].parents.reverse(),s=0;s<n.length;s+=1){const o=Ee(e,n,s);r[s]?r[s].p(o,l):(r[s]=Se(o),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(e){c(r,e),e&&i(t)}}}function Se(e){let t,n,r,l,s,c,h,v=e[17].name+"";function y(){return e[7](e[17])}return{c(){t=u("a"),n=d(v),s=p(),m(t,"href",r="#"+e[17].code),m(t,"class","svelte-2qp4su"),l=new $(s)},m(e,r){a(e,t,r),o(t,n),l.m(" &gt; ",e,r),a(e,s,r),c||(h=f(t,"click",y),c=!0)},p(l,s){e=l,8&s&&v!==(v=e[17].name+"")&&g(n,v),8&s&&r!==(r="#"+e[17].code)&&m(t,"href",r)},d(e){e&&i(t),e&&i(s),e&&l.d(),c=!1,h()}}}function Re(e){let t,n,r,l=le[e[3].type].name+"",s=e[3].parents[e[3].parents.length-1].name+"";return{c(){t=d(l),n=d(" in "),r=d(s)},m(e,l){a(e,t,l),a(e,n,l),a(e,r,l)},p(e,n){8&n&&l!==(l=le[e[3].type].name+"")&&g(t,l),8&n&&s!==(s=e[3].parents[e[3].parents.length-1].name+"")&&g(r,s)},d(e){e&&i(t),e&&i(n),e&&i(r)}}}function De(e){let t,n,r,l,s,p,f,v,y,w=e[3].children[0].typepl+"",$=e[3].name+"",x=e[3].children,b=[];for(let t=0;t<x.length;t+=1)b[t]=ze(je(e,x,t));return{c(){t=u("div"),n=u("div"),r=u("span"),l=d(w),s=d(" within "),p=d($),f=u("br"),v=h(),y=u("span");for(let e=0;e<b.length;e+=1)b[e].c();m(r,"class","text-label svelte-2qp4su"),m(y,"class","text-small svelte-2qp4su"),m(t,"class","grid mt svelte-2qp4su")},m(e,i){a(e,t,i),o(t,n),o(n,r),o(r,l),o(r,s),o(r,p),o(n,f),o(n,v),o(n,y);for(let e=0;e<b.length;e+=1)b[e].m(y,null)},p(e,t){if(8&t&&w!==(w=e[3].children[0].typepl+"")&&g(l,w),8&t&&$!==($=e[3].name+"")&&g(p,$),40&t){let n;for(x=e[3].children,n=0;n<x.length;n+=1){const r=je(e,x,n);b[n]?b[n].p(r,t):(b[n]=ze(r),b[n].c(),b[n].m(y,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=x.length}},d(e){e&&i(t),c(b,e)}}}function ze(e){let t,n,r,l,s,c,h=e[14].name+"",p=e[16]<e[3].children.length-1?", ":"";function v(){return e[10](e[14])}return{c(){t=u("a"),n=d(h),l=d(p),m(t,"href",r="#"+e[14].code),m(t,"class","svelte-2qp4su")},m(e,r){a(e,t,r),o(t,n),a(e,l,r),s||(c=f(t,"click",v),s=!0)},p(s,o){e=s,8&o&&h!==(h=e[14].name+"")&&g(n,h),8&o&&r!==(r="#"+e[14].code)&&m(t,"href",r),8&o&&p!==(p=e[16]<e[3].children.length-1?", ":"")&&g(l,p)},d(e){e&&i(t),e&&i(l),s=!1,c()}}}function Ie(e){let t,n,l,s;t=new xe({});let o=e[3]&&e[4]&&Oe(e);return{c(){z(t.$$.fragment),n=h(),o&&o.c(),l=p()},m(e,r){I(t,e,r),a(e,n,r),o&&o.m(e,r),a(e,l,r),s=!0},p(e,[t]){e[3]&&e[4]?o?(o.p(e,t),24&t&&R(o,1)):(o=Oe(e),o.c(),R(o,1),o.m(l.parentNode,l)):o&&(S={r:0,c:[],p:S},D(o,1,1,(()=>{o=null})),S.r||r(S.c),S=S.p)},i(e){s||(R(t.$$.fragment,e),R(o),s=!0)},o(e){D(t.$$.fragment,e),D(o),s=!1},d(e){U(t,e),e&&i(n),o&&o.d(e),e&&i(l)}}}function Ue(e,t,n){let r,l,s,o,a;function i(e){fetch(te+e+".json").then((e=>e.json())).then((t=>{t.children=r.filter((t=>t.parent==e)),t.count>20?fetch(re+t.type+".json").then((e=>e.json())).then((e=>{n(3,o=t)})):n(3,o=t)}))}function c(e){fetch(ne+e+".json").then((e=>e.json())).then((e=>{n(2,s=e),console.log("Place Health",s)}))}(async function(e){let t=await fetch(e),n=await t.text();return await X(n,Y)})(ee).then((e=>{e.forEach((e=>{e.typepl=le[e.type].pl,e.typenm=le[e.type].name})),n(0,r=e.sort(((e,t)=>e.name.localeCompare(t.name)))),n(1,l=r.find((e=>"Barnet"==e.name))),function(){const e="K04000001";fetch(te+e+".json").then((e=>e.json())).then((t=>{t.children=r.filter((t=>t.parent==e)),n(4,a=t)}))}(),i(l.code),c(l.code)}));return[r,l,s,o,a,i,c,e=>i(e.code),function(e){l=e,n(1,l)},()=>{l&&c(l.code)},e=>i(e.code)]}return new class extends F{constructor(e){super(),B(this,e,Ue,Ie,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
