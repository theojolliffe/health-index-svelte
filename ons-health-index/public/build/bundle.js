var app=function(){"use strict";function n(){}function e(n){return n()}function t(){return Object.create(null)}function a(n){n.forEach(e)}function i(n){return"function"==typeof n}function r(n,e){return n!=n?e==e:n!==e||n&&"object"==typeof n||"function"==typeof n}function o(n,e){n.appendChild(e)}function l(n,e,t){n.insertBefore(e,t||null)}function s(n){n.parentNode.removeChild(n)}function c(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function u(n){return document.createElement(n)}function d(n){return document.createTextNode(n)}function h(){return d(" ")}function p(){return d("")}function f(n,e,t,a){return n.addEventListener(e,t,a),()=>n.removeEventListener(e,t,a)}function m(n,e,t){null==t?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function g(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function v(n,e){n.value=null==e?"":e}function y(n,e,t,a){n.style.setProperty(e,t,a?"important":"")}function w(n,e,t){n.classList[t?"add":"remove"](e)}class C{constructor(n=null){this.a=n,this.e=this.n=null}m(n,e,t=null){this.e||(this.e=u(e.nodeName),this.t=e,this.h(n)),this.i(t)}h(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}i(n){for(let e=0;e<this.n.length;e+=1)l(this.t,this.n[e],n)}p(n){this.d(),this.h(n),this.i(this.a)}d(){this.n.forEach(s)}}let b;function $(n){b=n}function x(){const n=function(){if(!b)throw new Error("Function called outside component initialization");return b}();return(e,t)=>{const a=n.$$.callbacks[e];if(a){const i=function(n,e){const t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}(e,t);a.slice().forEach((e=>{e.call(n,i)}))}}}const T=[],k=[],R=[],_=[],A=Promise.resolve();let L=!1;function D(n){R.push(n)}let N=!1;const O=new Set;function E(){if(!N){N=!0;do{for(let n=0;n<T.length;n+=1){const e=T[n];$(e),q(e.$$)}for($(null),T.length=0;k.length;)k.pop()();for(let n=0;n<R.length;n+=1){const e=R[n];O.has(e)||(O.add(e),e())}R.length=0}while(T.length);for(;_.length;)_.pop()();L=!1,N=!1,O.clear()}}function q(n){if(null!==n.fragment){n.update(),a(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(D)}}const M=new Set;let j;function H(n,e){n&&n.i&&(M.delete(n),n.i(e))}function S(n,e,t,a){if(n&&n.o){if(M.has(n))return;M.add(n),j.c.push((()=>{M.delete(n),a&&(t&&n.d(1),a())})),n.o(e)}}function z(n){n&&n.c()}function U(n,t,r,o){const{fragment:l,on_mount:s,on_destroy:c,after_update:u}=n.$$;l&&l.m(t,r),o||D((()=>{const t=s.map(e).filter(i);c?c.push(...t):a(t),n.$$.on_mount=[]})),u.forEach(D)}function I(n,e){const t=n.$$;null!==t.fragment&&(a(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function P(n,e){-1===n.$$.dirty[0]&&(T.push(n),L||(L=!0,A.then(E)),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function F(e,i,r,o,l,c,u=[-1]){const d=b;$(e);const h=e.$$={fragment:null,ctx:null,props:c,update:n,not_equal:l,bound:t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:i.context||[]),callbacks:t(),dirty:u,skip_bound:!1};let p=!1;if(h.ctx=r?r(e,i.props||{},((n,t,...a)=>{const i=a.length?a[0]:t;return h.ctx&&l(h.ctx[n],h.ctx[n]=i)&&(!h.skip_bound&&h.bound[n]&&h.bound[n](i),p&&P(e,n)),t})):[],h.update(),p=!0,a(h.before_update),h.fragment=!!o&&o(h.ctx),i.target){if(i.hydrate){const n=function(n){return Array.from(n.childNodes)}(i.target);h.fragment&&h.fragment.l(n),n.forEach(s)}else h.fragment&&h.fragment.c();i.intro&&H(e.$$.fragment),U(e,i.target,i.anchor,i.customElement),E()}$(d)}class B{$destroy(){I(this,1),this.$destroy=n}$on(n,e){const t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}$set(n){var e;this.$$set&&(e=n,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}var V={},X={};function Z(n){return new Function("d","return {"+n.map((function(n,e){return JSON.stringify(n)+": d["+e+'] || ""'})).join(",")+"}")}function K(n){var e=Object.create(null),t=[];return n.forEach((function(n){for(var a in n)a in e||t.push(e[a]=a)})),t}function W(n,e){var t=n+"",a=t.length;return a<e?new Array(e-a+1).join(0)+t:t}function G(n){var e,t=n.getUTCHours(),a=n.getUTCMinutes(),i=n.getUTCSeconds(),r=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":((e=n.getUTCFullYear())<0?"-"+W(-e,6):e>9999?"+"+W(e,6):W(e,4))+"-"+W(n.getUTCMonth()+1,2)+"-"+W(n.getUTCDate(),2)+(r?"T"+W(t,2)+":"+W(a,2)+":"+W(i,2)+"."+W(r,3)+"Z":i?"T"+W(t,2)+":"+W(a,2)+":"+W(i,2)+"Z":a||t?"T"+W(t,2)+":"+W(a,2)+"Z":"")}var J=function(n){var e=new RegExp('["'+n+"\n\r]"),t=n.charCodeAt(0);function a(n,e){var a,i=[],r=n.length,o=0,l=0,s=r<=0,c=!1;function u(){if(s)return X;if(c)return c=!1,V;var e,a,i=o;if(34===n.charCodeAt(i)){for(;o++<r&&34!==n.charCodeAt(o)||34===n.charCodeAt(++o););return(e=o)>=r?s=!0:10===(a=n.charCodeAt(o++))?c=!0:13===a&&(c=!0,10===n.charCodeAt(o)&&++o),n.slice(i+1,e-1).replace(/""/g,'"')}for(;o<r;){if(10===(a=n.charCodeAt(e=o++)))c=!0;else if(13===a)c=!0,10===n.charCodeAt(o)&&++o;else if(a!==t)continue;return n.slice(i,e)}return s=!0,n.slice(i,r)}for(10===n.charCodeAt(r-1)&&--r,13===n.charCodeAt(r-1)&&--r;(a=u())!==X;){for(var d=[];a!==V&&a!==X;)d.push(a),a=u();e&&null==(d=e(d,l++))||i.push(d)}return i}function i(e,t){return e.map((function(e){return t.map((function(n){return o(e[n])})).join(n)}))}function r(e){return e.map(o).join(n)}function o(n){return null==n?"":n instanceof Date?G(n):e.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}return{parse:function(n,e){var t,i,r=a(n,(function(n,a){if(t)return t(n,a-1);i=n,t=e?function(n,e){var t=Z(n);return function(a,i){return e(t(a),i,n)}}(n,e):Z(n)}));return r.columns=i||[],r},parseRows:a,format:function(e,t){return null==t&&(t=K(e)),[t.map(o).join(n)].concat(i(e,t)).join("\n")},formatBody:function(n,e){return null==e&&(e=K(n)),i(n,e).join("\n")},formatRows:function(n){return n.map(r).join("\n")},formatRow:r,formatValue:o}}(",").parse;function Y(n){for(var e in n){var t,a,i=n[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(t=+i)){if(!(a=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Q&&a[4]&&!a[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=t;else i=null;n[e]=i}return n}const Q=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();const nn="https://raw.githubusercontent.com/theojolliffe/healthindexlads/main/csv/includedHealthAreas.csv",en="https://raw.githubusercontent.com/ONSvisual/census-data/main/json/place/",tn="https://raw.githubusercontent.com/theojolliffe/healthindexlads/main/",an="https://raw.githubusercontent.com/ONSvisual/census-data/main/json/quantiles/quartiles_",rn={ew:{name:"",pl:""},wd:{name:"Ward",pl:"Wards"},lad:{name:"District",pl:"Districts"},"Upper Tier Local Authority":{name:"Local Authority",pl:"Local Authorities"},rgn:{name:"Region",pl:"Regions"},ctry:{name:"Country",pl:"Countries"}};function on(n,e,t){const a=n.slice();return a[32]=e[t],a[35]=e,a[34]=t,a}function ln(n,e,t){const a=n.slice();return a[32]=e[t],a[33]=e,a[34]=t,a}function sn(n){let e,t,a,i,r,c,p,v=(n[0]?n[0]:"Select one")+"";return{c(){e=u("a"),t=u("span"),a=d(v),i=h(),r=u("span"),r.textContent=" ",m(t,"class","svelte-qdzmwx"),m(r,"class","button svelte-qdzmwx"),w(r,"search",n[3]),w(r,"down",!n[3]),m(e,"id","toggle"),m(e,"class","svelte-qdzmwx")},m(s,u){l(s,e,u),o(e,t),o(t,a),o(e,i),o(e,r),c||(p=f(e,"click",n[12]),c=!0)},p(n,e){1&e[0]&&v!==(v=(n[0]?n[0]:"Select one")+"")&&g(a,v),8&e[0]&&w(r,"search",n[3]),8&e[0]&&w(r,"down",!n[3])},d(n){n&&s(e),c=!1,p()}}}function cn(n){let e,t,i,r,c,p,v,y,w=n[6][n[1]]+"",C=n[2]&&un(n);return{c(){e=u("a"),t=u("span"),i=d(w),r=h(),C&&C.c(),c=h(),p=u("span"),p.textContent=" ",m(t,"class","selection svelte-qdzmwx"),m(p,"class","button close svelte-qdzmwx"),m(e,"id","toggle"),m(e,"class","selected svelte-qdzmwx")},m(a,s){l(a,e,s),o(e,t),o(t,i),o(t,r),C&&C.m(t,null),o(e,c),o(e,p),v||(y=[f(p,"click",n[14]),f(e,"click",n[12])],v=!0)},p(n,e){66&e[0]&&w!==(w=n[6][n[1]]+"")&&g(i,w),n[2]?C?C.p(n,e):(C=un(n),C.c(),C.m(t,null)):C&&(C.d(1),C=null)},d(n){n&&s(e),C&&C.d(),v=!1,a(y)}}}function un(n){let e,t,a=n[6][n[2]]+"";return{c(){e=u("small"),t=d(a),m(e,"class","svelte-qdzmwx")},m(n,a){l(n,e,a),o(e,t)},p(n,e){68&e[0]&&a!==(a=n[6][n[2]]+"")&&g(t,a)},d(n){n&&s(e)}}}function dn(n){let e,t,i,r,c,d;function p(n,e){return n[4].length<3?mn:n[9][0]&&n[2]?fn:n[9][0]?pn:hn}let g=p(n),w=g(n);return{c(){e=u("div"),t=u("input"),i=h(),r=u("ul"),w.c(),m(t,"type","text"),m(t,"placeholder",""),m(t,"autocomplete","false"),m(t,"class","svelte-qdzmwx"),m(r,"class","svelte-qdzmwx"),m(e,"id","dropdown"),y(e,"top","0"),m(e,"class","svelte-qdzmwx")},m(a,s){l(a,e,s),o(e,t),v(t,n[4]),n[23](t),o(e,i),o(e,r),w.m(r,null),n[30](e),c||(d=[f(t,"input",n[22]),f(t,"keyup",n[16])],c=!0)},p(n,e){16&e[0]&&t.value!==n[4]&&v(t,n[4]),g===(g=p(n))&&w?w.p(n,e):(w.d(1),w=g(n),w&&(w.c(),w.m(r,null)))},d(t){t&&s(e),n[23](null),w.d(),n[30](null),c=!1,a(d)}}}function hn(e){let t;return{c(){t=u("li"),t.textContent="No results",m(t,"class","svelte-qdzmwx")},m(n,e){l(n,t,e)},p:n,d(n){n&&s(t)}}}function pn(n){let e,t=n[9],a=[];for(let e=0;e<t.length;e+=1)a[e]=gn(on(n,t,e));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=p()},m(n,t){for(let e=0;e<a.length;e+=1)a[e].m(n,t);l(n,e,t)},p(n,i){if(11010&i[0]){let r;for(t=n[9],r=0;r<t.length;r+=1){const o=on(n,t,r);a[r]?a[r].p(o,i):(a[r]=gn(o),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}},d(n){c(a,n),n&&s(e)}}}function fn(n){let e,t=n[9],a=[];for(let e=0;e<t.length;e+=1)a[e]=vn(ln(n,t,e));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=p()},m(n,t){for(let e=0;e<a.length;e+=1)a[e].m(n,t);l(n,e,t)},p(n,i){if(11014&i[0]){let r;for(t=n[9],r=0;r<t.length;r+=1){const o=ln(n,t,r);a[r]?a[r].p(o,i):(a[r]=vn(o),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}},d(n){c(a,n),n&&s(e)}}}function mn(e){let t;return{c(){t=u("li"),t.textContent="Type a name...",m(t,"class","svelte-qdzmwx")},m(n,e){l(n,t,e)},p:n,d(n){n&&s(t)}}}function gn(n){let e,t,i,r,c,p=n[32][n[1]]+"",v=n[34];function y(){return n[27](n[32])}function C(){return n[28](n[34])}const b=()=>n[29](e,v),$=()=>n[29](null,v);return{c(){e=u("li"),t=d(p),i=h(),m(e,"class","svelte-qdzmwx"),w(e,"highlight",n[8]==n[34])},m(n,a){l(n,e,a),o(e,t),o(e,i),b(),r||(c=[f(e,"click",y),f(e,"mouseover",C)],r=!0)},p(a,i){n=a,514&i[0]&&p!==(p=n[32][n[1]]+"")&&g(t,p),v!==n[34]&&($(),v=n[34],b()),256&i[0]&&w(e,"highlight",n[8]==n[34])},d(n){n&&s(e),$(),r=!1,a(c)}}}function vn(n){let e,t,i,r,c,p,v,y,C=n[32][n[1]]+"",b=n[32][n[2]]+"",$=n[34];function x(){return n[24](n[32])}function T(){return n[25](n[34])}const k=()=>n[26](e,$),R=()=>n[26](null,$);return{c(){e=u("li"),t=d(C),i=h(),r=u("small"),c=d(b),p=h(),m(r,"class","svelte-qdzmwx"),m(e,"class","svelte-qdzmwx"),w(e,"highlight",n[8]==n[34])},m(n,a){l(n,e,a),o(e,t),o(e,i),o(e,r),o(r,c),o(e,p),k(),v||(y=[f(e,"click",x),f(e,"mouseover",T)],v=!0)},p(a,i){n=a,514&i[0]&&C!==(C=n[32][n[1]]+"")&&g(t,C),516&i[0]&&b!==(b=n[32][n[2]]+"")&&g(c,b),$!==n[34]&&(R(),$=n[34],k()),256&i[0]&&w(e,"highlight",n[8]==n[34])},d(n){n&&s(e),R(),v=!1,a(y)}}}function yn(e){let t,a,i,r;function c(n,e){return n[6]&&!n[3]?cn:sn}let d=c(e),p=d(e),g=e[7]&&dn(e);return{c(){t=u("div"),p.c(),a=h(),g&&g.c(),m(t,"id","select"),m(t,"class","svelte-qdzmwx"),w(t,"active",e[7])},m(n,s){l(n,t,s),p.m(t,null),o(t,a),g&&g.m(t,null),i||(r=f(t,"keydown",e[15]),i=!0)},p(n,e){d===(d=c(n))&&p?p.p(n,e):(p.d(1),p=d(n),p&&(p.c(),p.m(t,a))),n[7]?g?g.p(n,e):(g=dn(n),g.c(),g.m(t,null)):g&&(g.d(1),g=null),128&e[0]&&w(t,"active",n[7])},i:n,o:n,d(n){n&&s(t),p.d(),g&&g.d(),i=!1,r()}}}function wn(n,e,t){let a;const i=x();let r,o,l,{options:s}=e,{selected:c=null}=e,{placeholder:u="Find an area..."}=e,{value:d="code"}=e,{label:h="name"}=e,{group:p=null}=e,{search:f=!1}=e,m=c,g=c?s.find((n=>{n[d],c[d]})):null,v=!1,y="",w=null,C=[];function b(n){t(17,c=n),t(7,v=!1),i("select",{selected:n,value:n[d]})}return n.$$set=n=>{"options"in n&&t(18,s=n.options),"selected"in n&&t(17,c=n.selected),"placeholder"in n&&t(0,u=n.placeholder),"value"in n&&t(19,d=n.value),"label"in n&&t(1,h=n.label),"group"in n&&t(2,p=n.group),"search"in n&&t(3,f=n.search)},n.$$.update=()=>{16&n.$$.dirty[0]&&t(21,a=y?new RegExp(y,"i"):null),2359298&n.$$.dirty[0]&&(t(9,r=a?s.filter((n=>a.test(n[h]))):s),t(8,w=0)),32&n.$$.dirty[0]&&(document.onclick=function(n){n.target!==o&&(t(7,v=!1),t(8,w=0))}),1966080&n.$$.dirty[0]&&m!=c&&(t(6,g=s.find((n=>n[d]==c[d]))),t(20,m=c))},[u,h,p,f,y,o,g,v,w,r,l,C,function(n){var e;n.stopPropagation(),t(4,y=""),t(7,v=!v),(e=10,new Promise((n=>setTimeout(n,e)))).then((()=>{l&&v&&l.focus()}))},b,function(n){n.stopPropagation(),t(17,c=null),t(20,m=null),t(6,g=null),i("select",{selected:null,value:null})},function(n){v&&r[0]&&Number.isInteger(w)&&(38===n.keyCode?(t(8,w-=w>0?1:0),C[w].scrollIntoView({block:"nearest",inline:"start"})):40===n.keyCode&&(t(8,w+=w<r.length-1?1:0),C[w].scrollIntoView({block:"nearest",inline:"end"})))},function(n){r[0]&&Number.isInteger(w)&&13===n.keyCode&&b(r[w])},c,s,d,m,a,function(){y=this.value,t(4,y)},function(n){k[n?"unshift":"push"]((()=>{l=n,t(10,l)}))},n=>b(n),n=>t(8,w=n),function(n,e){k[n?"unshift":"push"]((()=>{C[e]=n,t(11,C)}))},n=>b(n),n=>t(8,w=n),function(n,e){k[n?"unshift":"push"]((()=>{C[e]=n,t(11,C)}))},function(n){k[n?"unshift":"push"]((()=>{o=n,t(5,o)}))}]}class Cn extends B{constructor(n){super(),F(this,n,wn,yn,r,{options:18,selected:17,placeholder:0,value:19,label:1,group:2,search:3},[-1,-1])}}function bn(e){let t;return{c(){t=u("div"),t.innerHTML="<strong>Warning!</strong> This is a prototype. Data likely to contain inaccuracies.",m(t,"class","warning svelte-srzfvi")},m(n,e){l(n,t,e)},p:n,i:n,o:n,d(n){n&&s(t)}}}class $n extends B{constructor(n){super(),F(this,n,null,bn,r,{})}}function xn(n){let e,t,a,i=n[4](n[0])+"",r=n[3](n[0])+"";return{c(){e=u("div"),t=h(),a=u("div"),y(e,"font-weight","600")},m(n,o){l(n,e,o),e.innerHTML=i,l(n,t,o),l(n,a,o),a.innerHTML=r},p(n,t){1&t&&i!==(i=n[4](n[0])+"")&&(e.innerHTML=i),1&t&&r!==(r=n[3](n[0])+"")&&(a.innerHTML=r)},d(n){n&&s(e),n&&s(t),n&&s(a)}}}function Tn(e){let t,a,i,r,c,d,g=e[1]&&xn(e);return{c(){t=u("script"),i=h(),g&&g.c(),r=p(),t.src!==(a="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")&&m(t,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(n,a){o(document.head,t),l(n,i,a),g&&g.m(n,a),l(n,r,a),c||(d=f(t,"load",e[2]),c=!0)},p(n,[e]){n[1]?g?g.p(n,e):(g=xn(n),g.c(),g.m(r.parentNode,r)):g&&(g.d(1),g=null)},i:n,o:n,d(n){s(t),n&&s(i),g&&g.d(n),n&&s(r),c=!1,d()}}}function kn(n,e,t){let{place:a}=e,i=!1;return n.$$set=n=>{"place"in n&&t(0,a=n.place)},[a,i,()=>{t(1,i=!0)},function(n){let e=n.priority2018.Highest.map((n=>(n.pos="improvement",n))),t=n.priority2018.Lowest.map((n=>(n.pos="decline",n))),a=e.concat(t).filter((n=>"Subdomain"==n["Index level"]));return a.sort((function(n,e){return n.hlRank-e.hlRank})),console.log("place",n),console.log("subDomains",a),rosaenlg_en_US.render("\nmixin intro\n    synz\n        syn\n            | #[+value(place.name)] saw England’s\n\nmixin firstSen(i)\n    | #[+value(place.name)] \n    if (subDomain[i].hlRankType==\"Rank\")\n        | has England's\n        | #[+value(subDomain[i].hlRank, {'ORDINAL_TEXTUAL':true})] highest score for\n    else\n        | saw England’s\n        | #[+value(subDomain[i].hlRank, {'ORDINAL_TEXTUAL':true})] greatest #[+value(subDomain[i].pos)] in \n    i #[+value((subDomain[i].Measure).toLowerCase())] \n    i \n    if (subDomain[i].hlRankType==\"Change1year Rank\")\n        | between 2017 and 2018 \n    else if (subDomain[i].hlRankType==\"Change3year Rank\")\n        | in the three years between 2015 and 2018\n    | .\n\nmixin subd(i)\n    | #[+value(subDomain[i].Measure)] \n    | is a subdomain of \n    | #[+value(subDomain[i].Domain)]\n    | which looks at\n    eachz indic in Object.keys(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].indicators) with { separator:',', last_separator:'and' }\n        i #[+value(indic.toLowerCase())]\n        i\n    | .\n\nmixin topBot(i, yr)\n    | top \n    | #[+value(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[yr].Rank/149, {'FORMAT': '0%'})]\n\nmixin secondSen(i)\n    if (subDomain[i].hlRankType==\"Change1year Rank\")\n        | From 2017 to 2018,\n        | #[+value(place.name)] went from \n        | #[+topBot(i, 2017)]\n        | (index 107.9) \n    else\n        | From 2015 to 2018,\n        | #[+value(place.name)] went from \n        | #[+topBot(i, 2015)]\n        | (index 107.9) \n    | to \n    | #[+topBot(i, 2018)]  \n    | (112.7) \n    | for \n    | #[+value(subDomain[i].Measure.toLowerCase())]\n    if !(subDomain[i].hlRankType==\"Rank\")\n        | , giving it England’s \n        | #[+value(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[2018].Rank, {'ORDINAL_TEXTUAL':true})] \n        | highest score\n    | .\n\nmixin lastSen(i)\n    | This change was largely driven by \n    if (subDomain[i].hlRankType==\"Change1year Rank\")\n        if (negs.includes((indicators[i][0].indi).toLowerCase()))\n            | decline in the rate of \n            | #[+value((indicators[i][0].indi).toLowerCase())] \n            | (index improved by #[+value(indicators[i][0][2018].Change1year)]) and \n        else\n            | improvements in \n            | #[+value((indicators[i][0].indi).toLowerCase())] \n            | (#[+value(indicators[i][0][2018].Change1year, {'FORMAT': '+0.0'})]) and \n        if (negs.includes((indicators[i][1].indi).toLowerCase()))\n            | a decline in the rate of \n            | #[+value((indicators[i][1].indi).toLowerCase())] \n            | (index improved by #[+value(indicators[i][1][2018].Change1year)] points), \n        else\n            | improvements in \n            | #[+value((indicators[i][1].indi).toLowerCase())] \n            | (#[+value(indicators[i][1][2018].Change1year, {'FORMAT': '+0.0'})]), \n        if (indicators[i][indicators[i].length-1][2018].Change1year<0)\n            | however there was also a decline in \n            | #[+value((indicators[i][indicators[i].length-1].indi).toLowerCase())]\n            | (#[+value(indicators[i][indicators[i].length-1][2018].Change1year, {'FORMAT': '+0.0'})]).\n    else\n        if (negs.includes((indicators[i][0].indi).toLowerCase()))\n            | decline in the rate of \n            | #[+value((indicators[i][0].indi).toLowerCase())] \n            | (index improved by #[+value(indicators[i][0][2018].Change3year)]) and \n        else\n            | improvements in \n            | #[+value((indicators[i][0].indi).toLowerCase())] \n            | (#[+value(indicators[i][0][2018].Change3year, {'FORMAT': '+0.0'})]) and \n        if (negs.includes((indicators[i][1].indi).toLowerCase()))\n            | a decline in the rate of \n            | #[+value((indicators[i][1].indi).toLowerCase())] \n            | (index improved by #[+value(indicators[i][1][2018].Change3year)] points), \n        else\n            | improvements in \n            | #[+value((indicators[i][1].indi).toLowerCase())] \n            | (#[+value(indicators[i][1][2018].Change3year, {'FORMAT': '+0.0'})]), \n        if (indicators[i][indicators[i].length-1][2018].Change3year<0)\n            | however there was also a decline in \n            | #[+value((indicators[i][indicators[i].length-1].indi).toLowerCase())]\n            | (#[+value(indicators[i][indicators[i].length-1][2018].Change3year, {'FORMAT': '+0.0'})]).\n\nmixin para(i)\n    p #[+firstSen(i)]\n    p #[+subd(i)]\n    p #[+secondSen(i)] \n    p #[+lastSen(i)]\n\nhr\np < MAIN INDEX GRAPHS >\nhr\np #[+para(0)]\nhr\np < CHART >\nhr\np #[+para(1)]\nhr\np < CHART >\nhr\np #[+para(2)]\nhr\np < CHART >\nhr\np #[+para(3)]\nhr\np < CHART >\n",{language:"en_UK",place:n,subDomain:a,negs:["smoking","anxiety"],indicators:function(n){let e=[];for(let t=0;t<a.length;t++){let i=n[a[t].Domain].subdomains[a[t].Subdomain].indicators,r=[];for(const[n,e]of Object.entries(i))e.indi=n,r.push({}),r[r.length-1]=e;r.sort((function(n,e){return e[2018].Change3year-n[2018].Change3year})),e.push(r)}return e}(n.data)})},function(n){return rosaenlg_en_US.render("\nmixin updown\n    if (place.data.Overall.total[2018].Change1year > 0)\n        | up\n    else if (place.data.Overall.total[2018].Change1year < 0)\n        | down\n\nmixin sidDiff\n    // This needs to be replaced with a calculation for significant difference when we reieve the data, -0.4 was the national ave change\n    if (Math.abs(place.data.Overall.total[2018].Change1year-(-0.4))<0.3)\n        | a decline inline with the average across England.\n    else if (place.data.Overall.total[2018].Change1year-(-0.4)<-0.3)\n        | a slightly greater decline than the average across England.\n\np\n    | #[+value(place.name)] \n    | has an overall health index of \n    | #[+value(place.data.Overall.total[2018].value)].\n    | This is determined by scores for three domains; \n    | Healthy Lives (#[+value(place.data['Healthy Lives'].total[2018].value)]), \n    | Healthy People (#[+value(place.data['Healthy People'].total[2018].value)]) and \n    | Healthy Places (#[+value(place.data['Healthy Places'].total[2018].value)]).\n\np \n    | #[+value(place.name)] \n    | was ranked \n    | #[+value(place.data.Overall.total[2018].Rank, {'ORDINAL_NUMBER':true })] \n    | healthiest out of 149 districts in England. It's index score was \n    | #[+updown] \n    | #[+value(Math.abs(place.data.Overall.total[2018].Change1year/100), {'FORMAT': '0.0%'})]\n    | on last year;\n    | #[+sidDiff]\n\np\n    | A score of 100 equates to the average across England when the index was first calculated in 2015.\n",{language:"en_UK",place:n})}]}class Rn extends B{constructor(n){super(),F(this,n,kn,Tn,r,{place:0})}}let _n={};function An(n,e,t){const a=n.slice();return a[14]=e[t],a[16]=t,a}function Ln(n,e,t){const a=n.slice();return a[17]=e[t],a[16]=t,a}function Dn(n){let e,t,a,i,r,c,p,f,v,w,C,b,$,x,T,R,A,L,D,N,O,E,q,M,j,P,F,B,V=n[3].name+"",X=n[2].name+"",Z=n[3].parents[0]&&Nn(n),K=n[3].parents[0]&&En(n);function W(e){n[8](e)}let G={options:n[0],group:"typenm",search:!0};void 0!==n[1]&&(G.selected=n[1]),R=new Cn({props:G}),k.push((()=>function(n,e,t){const a=n.$$.props[e];void 0!==a&&(n.$$.bound[a]=t,t(n.$$.ctx[a]))}(R,"selected",W))),R.$on("select",n[9]),E=new Rn({props:{place:n[2]}});let J=n[3].children[0]&&qn(n);return{c(){e=u("div"),t=u("div"),Z&&Z.c(),a=h(),i=d(V),r=h(),c=u("div"),p=u("div"),f=u("span"),v=d("Health Index:  "),w=d(X),C=u("br"),b=h(),K&&K.c(),$=h(),x=u("div"),T=u("div"),z(R.$$.fragment),L=h(),D=u("div"),N=u("br"),O=h(),z(E.$$.fragment),q=h(),M=u("hr"),j=h(),J&&J.c(),P=h(),F=u("div"),F.innerHTML='<div><img src="https://onsvisual.github.io/svelte-scrolly/img/ons-logo-pos-en.svg" alt="Office for National Statistics" class="svelte-2qp4su"/></div> \n\t<div class="right svelte-2qp4su"><span class="text-small svelte-2qp4su">Source: Census 2011, with change +/- from Census 2001.</span></div>',m(t,"class","text-small svelte-2qp4su"),m(e,"class","grid svelte-2qp4su"),m(f,"class","text-big svelte-2qp4su"),y(T,"width","240px"),y(T,"float","right"),m(c,"class","grid-2 svelte-2qp4su"),m(D,"class","profile-grid mt svelte-2qp4su"),m(F,"class","grid-2 mt svelte-2qp4su")},m(n,s){l(n,e,s),o(e,t),Z&&Z.m(t,null),o(t,a),o(t,i),l(n,r,s),l(n,c,s),o(c,p),o(p,f),o(f,v),o(f,w),o(p,C),o(p,b),K&&K.m(p,null),o(c,$),o(c,x),o(x,T),U(R,T,null),l(n,L,s),l(n,D,s),o(D,N),o(D,O),U(E,D,null),o(D,q),o(D,M),l(n,j,s),J&&J.m(n,s),l(n,P,s),l(n,F,s),B=!0},p(n,e){n[3].parents[0]?Z?Z.p(n,e):(Z=Nn(n),Z.c(),Z.m(t,a)):Z&&(Z.d(1),Z=null),(!B||8&e)&&V!==(V=n[3].name+"")&&g(i,V),(!B||4&e)&&X!==(X=n[2].name+"")&&g(w,X),n[3].parents[0]?K?K.p(n,e):(K=En(n),K.c(),K.m(p,null)):K&&(K.d(1),K=null);const r={};var o;1&e&&(r.options=n[0]),!A&&2&e&&(A=!0,r.selected=n[1],o=()=>A=!1,_.push(o)),R.$set(r);const l={};4&e&&(l.place=n[2]),E.$set(l),n[3].children[0]?J?J.p(n,e):(J=qn(n),J.c(),J.m(P.parentNode,P)):J&&(J.d(1),J=null)},i(n){B||(H(R.$$.fragment,n),H(E.$$.fragment,n),B=!0)},o(n){S(R.$$.fragment,n),S(E.$$.fragment,n),B=!1},d(n){n&&s(e),Z&&Z.d(),n&&s(r),n&&s(c),K&&K.d(),I(R),n&&s(L),n&&s(D),I(E),n&&s(j),J&&J.d(n),n&&s(P),n&&s(F)}}}function Nn(n){let e,t=n[3].parents.reverse(),a=[];for(let e=0;e<t.length;e+=1)a[e]=On(Ln(n,t,e));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=p()},m(n,t){for(let e=0;e<a.length;e+=1)a[e].m(n,t);l(n,e,t)},p(n,i){if(40&i){let r;for(t=n[3].parents.reverse(),r=0;r<t.length;r+=1){const o=Ln(n,t,r);a[r]?a[r].p(o,i):(a[r]=On(o),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}},d(n){c(a,n),n&&s(e)}}}function On(n){let e,t,a,i,r,c,h,v=n[17].name+"";function y(){return n[7](n[17])}return{c(){e=u("a"),t=d(v),r=p(),m(e,"href",a="#"+n[17].code),m(e,"class","svelte-2qp4su"),i=new C(r)},m(n,a){l(n,e,a),o(e,t),i.m(" &gt; ",n,a),l(n,r,a),c||(h=f(e,"click",y),c=!0)},p(i,r){n=i,8&r&&v!==(v=n[17].name+"")&&g(t,v),8&r&&a!==(a="#"+n[17].code)&&m(e,"href",a)},d(n){n&&s(e),n&&s(r),n&&i.d(),c=!1,h()}}}function En(n){let e,t,a,i=rn[n[3].type].name+"",r=n[3].parents[n[3].parents.length-1].name+"";return{c(){e=d(i),t=d(" in "),a=d(r)},m(n,i){l(n,e,i),l(n,t,i),l(n,a,i)},p(n,t){8&t&&i!==(i=rn[n[3].type].name+"")&&g(e,i),8&t&&r!==(r=n[3].parents[n[3].parents.length-1].name+"")&&g(a,r)},d(n){n&&s(e),n&&s(t),n&&s(a)}}}function qn(n){let e,t,a,i,r,p,f,v,y,w=n[3].children[0].typepl+"",C=n[3].name+"",b=n[3].children,$=[];for(let e=0;e<b.length;e+=1)$[e]=Mn(An(n,b,e));return{c(){e=u("div"),t=u("div"),a=u("span"),i=d(w),r=d(" within "),p=d(C),f=u("br"),v=h(),y=u("span");for(let n=0;n<$.length;n+=1)$[n].c();m(a,"class","text-label svelte-2qp4su"),m(y,"class","text-small svelte-2qp4su"),m(e,"class","grid mt svelte-2qp4su")},m(n,s){l(n,e,s),o(e,t),o(t,a),o(a,i),o(a,r),o(a,p),o(t,f),o(t,v),o(t,y);for(let n=0;n<$.length;n+=1)$[n].m(y,null)},p(n,e){if(8&e&&w!==(w=n[3].children[0].typepl+"")&&g(i,w),8&e&&C!==(C=n[3].name+"")&&g(p,C),40&e){let t;for(b=n[3].children,t=0;t<b.length;t+=1){const a=An(n,b,t);$[t]?$[t].p(a,e):($[t]=Mn(a),$[t].c(),$[t].m(y,null))}for(;t<$.length;t+=1)$[t].d(1);$.length=b.length}},d(n){n&&s(e),c($,n)}}}function Mn(n){let e,t,a,i,r,c,h=n[14].name+"",p=n[16]<n[3].children.length-1?", ":"";function v(){return n[10](n[14])}return{c(){e=u("a"),t=d(h),i=d(p),m(e,"href",a="#"+n[14].code),m(e,"class","svelte-2qp4su")},m(n,a){l(n,e,a),o(e,t),l(n,i,a),r||(c=f(e,"click",v),r=!0)},p(r,o){n=r,8&o&&h!==(h=n[14].name+"")&&g(t,h),8&o&&a!==(a="#"+n[14].code)&&m(e,"href",a),8&o&&p!==(p=n[16]<n[3].children.length-1?", ":"")&&g(i,p)},d(n){n&&s(e),n&&s(i),r=!1,c()}}}function jn(n){let e,t,i,r;e=new $n({});let o=n[3]&&n[4]&&Dn(n);return{c(){z(e.$$.fragment),t=h(),o&&o.c(),i=p()},m(n,a){U(e,n,a),l(n,t,a),o&&o.m(n,a),l(n,i,a),r=!0},p(n,[e]){n[3]&&n[4]?o?(o.p(n,e),24&e&&H(o,1)):(o=Dn(n),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(j={r:0,c:[],p:j},S(o,1,1,(()=>{o=null})),j.r||a(j.c),j=j.p)},i(n){r||(H(e.$$.fragment,n),H(o),r=!0)},o(n){S(e.$$.fragment,n),S(o),r=!1},d(n){I(e,n),n&&s(t),o&&o.d(n),n&&s(i)}}}function Hn(n,e,t){let a,i,r,o,l;function s(n){fetch(en+n+".json").then((n=>n.json())).then((e=>{e.children=a.filter((e=>e.parent==n)),e.count>20?fetch(an+e.type+".json").then((n=>n.json())).then((n=>{t(3,o=e)})):t(3,o=e)}))}function c(n){fetch(tn+n+".json").then((n=>n.json())).then((n=>{t(2,r=n),console.log("Place Health",r)}))}(async function(n){let e=await fetch(n),t=await e.text();return await J(t,Y)})(nn).then((n=>{n.forEach((n=>{n.typepl=rn[n.type].pl,n.typenm=rn[n.type].name})),t(0,a=n.sort(((n,e)=>n.name.localeCompare(e.name)))),t(1,i=a.find((n=>"Barnet"==n.name))),function(){const n="K04000001";fetch(en+n+".json").then((n=>n.json())).then((e=>{e.children=a.filter((e=>e.parent==n)),t(4,l=e)}))}(),s(i.code),c(i.code)}));return[a,i,r,o,l,s,c,n=>s(n.code),function(n){i=n,t(1,i)},()=>{i&&c(i.code)},n=>s(n.code)]}[{varCode:"ranking_1_sent",comment:"TOTAL POPULATION",template:"{Current?:{Change1year?Between 2017 and 2018,:In the three years from 2015 to 2018,}}{firstPara? {ladName}:{Current?This area: this area}} {Current?has:saw} England's {ordinalSuffix} {Current?highest score for:{rankIsNegative?greatest decline:greatest improvement in}} {measure}."},{varCode:"domain_1_sent",comment:"POPULATION CHANGE",template:"Barnet has a health index score of 100, the 32nd healthiest district in England."},{varCode:"domain_2_sent",comment:"PROPORTION OVER 65",template:"Barnet's overall health has improved since scoring 99 in 2015."}].forEach((n=>{_n[n.varCode]=n.template}));return new class extends B{constructor(n){super(),F(this,n,Hn,jn,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
