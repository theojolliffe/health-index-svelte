var app=function(){"use strict";function n(){}function e(n){return n()}function t(){return Object.create(null)}function a(n){n.forEach(e)}function i(n){return"function"==typeof n}function o(n,e){return n!=n?e==e:n!==e||n&&"object"==typeof n||"function"==typeof n}function l(n,e){n.appendChild(e)}function r(n,e,t){n.insertBefore(e,t||null)}function s(n){n.parentNode.removeChild(n)}function c(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function u(n){return document.createElement(n)}function d(n){return document.createTextNode(n)}function h(){return d(" ")}function p(){return d("")}function m(n,e,t,a){return n.addEventListener(e,t,a),()=>n.removeEventListener(e,t,a)}function f(n,e,t){null==t?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function g(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function v(n,e){n.value=null==e?"":e}function b(n,e,t,a){n.style.setProperty(e,t,a?"important":"")}function w(n,e,t){n.classList[t?"add":"remove"](e)}class y{constructor(n=null){this.a=n,this.e=this.n=null}m(n,e,t=null){this.e||(this.e=u(e.nodeName),this.t=e,this.h(n)),this.i(t)}h(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}i(n){for(let e=0;e<this.n.length;e+=1)r(this.t,this.n[e],n)}p(n){this.d(),this.h(n),this.i(this.a)}d(){this.n.forEach(s)}}let x;function $(n){x=n}function C(){const n=function(){if(!x)throw new Error("Function called outside component initialization");return x}();return(e,t)=>{const a=n.$$.callbacks[e];if(a){const i=function(n,e){const t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,e),t}(e,t);a.slice().forEach((e=>{e.call(n,i)}))}}}const D=[],T=[],k=[],R=[],A=Promise.resolve();let _=!1;function L(n){k.push(n)}let O=!1;const M=new Set;function N(){if(!O){O=!0;do{for(let n=0;n<D.length;n+=1){const e=D[n];$(e),E(e.$$)}for($(null),D.length=0;T.length;)T.pop()();for(let n=0;n<k.length;n+=1){const e=k[n];M.has(e)||(M.add(e),e())}k.length=0}while(D.length);for(;R.length;)R.pop()();_=!1,O=!1,M.clear()}}function E(n){if(null!==n.fragment){n.update(),a(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(L)}}const j=new Set;let H;function S(n,e){n&&n.i&&(j.delete(n),n.i(e))}function I(n,e,t,a){if(n&&n.o){if(j.has(n))return;j.add(n),H.c.push((()=>{j.delete(n),a&&(t&&n.d(1),a())})),n.o(e)}}function U(n){n&&n.c()}function q(n,t,o,l){const{fragment:r,on_mount:s,on_destroy:c,after_update:u}=n.$$;r&&r.m(t,o),l||L((()=>{const t=s.map(e).filter(i);c?c.push(...t):a(t),n.$$.on_mount=[]})),u.forEach(L)}function z(n,e){const t=n.$$;null!==t.fragment&&(a(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function F(n,e){-1===n.$$.dirty[0]&&(D.push(n),_||(_=!0,A.then(N)),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function P(e,i,o,l,r,c,u=[-1]){const d=x;$(e);const h=e.$$={fragment:null,ctx:null,props:c,update:n,not_equal:r,bound:t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:i.context||[]),callbacks:t(),dirty:u,skip_bound:!1};let p=!1;if(h.ctx=o?o(e,i.props||{},((n,t,...a)=>{const i=a.length?a[0]:t;return h.ctx&&r(h.ctx[n],h.ctx[n]=i)&&(!h.skip_bound&&h.bound[n]&&h.bound[n](i),p&&F(e,n)),t})):[],h.update(),p=!0,a(h.before_update),h.fragment=!!l&&l(h.ctx),i.target){if(i.hydrate){const n=function(n){return Array.from(n.childNodes)}(i.target);h.fragment&&h.fragment.l(n),n.forEach(s)}else h.fragment&&h.fragment.c();i.intro&&S(e.$$.fragment),q(e,i.target,i.anchor,i.customElement),N()}$(d)}class B{$destroy(){z(this,1),this.$destroy=n}$on(n,e){const t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}$set(n){var e;this.$$set&&(e=n,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}var X={},V={};function Z(n){return new Function("d","return {"+n.map((function(n,e){return JSON.stringify(n)+": d["+e+'] || ""'})).join(",")+"}")}function K(n){var e=Object.create(null),t=[];return n.forEach((function(n){for(var a in n)a in e||t.push(e[a]=a)})),t}function W(n,e){var t=n+"",a=t.length;return a<e?new Array(e-a+1).join(0)+t:t}function G(n){var e,t=n.getUTCHours(),a=n.getUTCMinutes(),i=n.getUTCSeconds(),o=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":((e=n.getUTCFullYear())<0?"-"+W(-e,6):e>9999?"+"+W(e,6):W(e,4))+"-"+W(n.getUTCMonth()+1,2)+"-"+W(n.getUTCDate(),2)+(o?"T"+W(t,2)+":"+W(a,2)+":"+W(i,2)+"."+W(o,3)+"Z":i?"T"+W(t,2)+":"+W(a,2)+":"+W(i,2)+"Z":a||t?"T"+W(t,2)+":"+W(a,2)+"Z":"")}var J=function(n){var e=new RegExp('["'+n+"\n\r]"),t=n.charCodeAt(0);function a(n,e){var a,i=[],o=n.length,l=0,r=0,s=o<=0,c=!1;function u(){if(s)return V;if(c)return c=!1,X;var e,a,i=l;if(34===n.charCodeAt(i)){for(;l++<o&&34!==n.charCodeAt(l)||34===n.charCodeAt(++l););return(e=l)>=o?s=!0:10===(a=n.charCodeAt(l++))?c=!0:13===a&&(c=!0,10===n.charCodeAt(l)&&++l),n.slice(i+1,e-1).replace(/""/g,'"')}for(;l<o;){if(10===(a=n.charCodeAt(e=l++)))c=!0;else if(13===a)c=!0,10===n.charCodeAt(l)&&++l;else if(a!==t)continue;return n.slice(i,e)}return s=!0,n.slice(i,o)}for(10===n.charCodeAt(o-1)&&--o,13===n.charCodeAt(o-1)&&--o;(a=u())!==V;){for(var d=[];a!==X&&a!==V;)d.push(a),a=u();e&&null==(d=e(d,r++))||i.push(d)}return i}function i(e,t){return e.map((function(e){return t.map((function(n){return l(e[n])})).join(n)}))}function o(e){return e.map(l).join(n)}function l(n){return null==n?"":n instanceof Date?G(n):e.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}return{parse:function(n,e){var t,i,o=a(n,(function(n,a){if(t)return t(n,a-1);i=n,t=e?function(n,e){var t=Z(n);return function(a,i){return e(t(a),i,n)}}(n,e):Z(n)}));return o.columns=i||[],o},parseRows:a,format:function(e,t){return null==t&&(t=K(e)),[t.map(l).join(n)].concat(i(e,t)).join("\n")},formatBody:function(n,e){return null==e&&(e=K(n)),i(n,e).join("\n")},formatRows:function(n){return n.map(o).join("\n")},formatRow:o,formatValue:l}}(",").parse;function Y(n){for(var e in n){var t,a,i=n[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(t=+i)){if(!(a=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Q&&a[4]&&!a[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=t;else i=null;n[e]=i}return n}const Q=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();const nn="https://raw.githubusercontent.com/theojolliffe/healthindexlads/main/csv/includedHealthAreas.csv",en="https://raw.githubusercontent.com/ONSvisual/census-data/main/json/place/",tn="https://raw.githubusercontent.com/theojolliffe/healthindexlads/main/",an="https://raw.githubusercontent.com/ONSvisual/census-data/main/json/quantiles/quartiles_",on={ew:{name:"",pl:""},wd:{name:"Ward",pl:"Wards"},lad:{name:"District",pl:"Districts"},"Upper Tier Local Authority":{name:"Local Authority",pl:"Local Authorities"},rgn:{name:"Region",pl:"Regions"},ctry:{name:"Country",pl:"Countries"}};function ln(n,e,t){const a=n.slice();return a[32]=e[t],a[35]=e,a[34]=t,a}function rn(n,e,t){const a=n.slice();return a[32]=e[t],a[33]=e,a[34]=t,a}function sn(n){let e,t,a,i,o,c,p,v=(n[0]?n[0]:"Select one")+"";return{c(){e=u("a"),t=u("span"),a=d(v),i=h(),o=u("span"),o.textContent=" ",f(t,"class","svelte-qdzmwx"),f(o,"class","button svelte-qdzmwx"),w(o,"search",n[3]),w(o,"down",!n[3]),f(e,"id","toggle"),f(e,"class","svelte-qdzmwx")},m(s,u){r(s,e,u),l(e,t),l(t,a),l(e,i),l(e,o),c||(p=m(e,"click",n[12]),c=!0)},p(n,e){1&e[0]&&v!==(v=(n[0]?n[0]:"Select one")+"")&&g(a,v),8&e[0]&&w(o,"search",n[3]),8&e[0]&&w(o,"down",!n[3])},d(n){n&&s(e),c=!1,p()}}}function cn(n){let e,t,i,o,c,p,v,b,w=n[6][n[1]]+"",y=n[2]&&un(n);return{c(){e=u("a"),t=u("span"),i=d(w),o=h(),y&&y.c(),c=h(),p=u("span"),p.textContent=" ",f(t,"class","selection svelte-qdzmwx"),f(p,"class","button close svelte-qdzmwx"),f(e,"id","toggle"),f(e,"class","selected svelte-qdzmwx")},m(a,s){r(a,e,s),l(e,t),l(t,i),l(t,o),y&&y.m(t,null),l(e,c),l(e,p),v||(b=[m(p,"click",n[14]),m(e,"click",n[12])],v=!0)},p(n,e){66&e[0]&&w!==(w=n[6][n[1]]+"")&&g(i,w),n[2]?y?y.p(n,e):(y=un(n),y.c(),y.m(t,null)):y&&(y.d(1),y=null)},d(n){n&&s(e),y&&y.d(),v=!1,a(b)}}}function un(n){let e,t,a=n[6][n[2]]+"";return{c(){e=u("small"),t=d(a),f(e,"class","svelte-qdzmwx")},m(n,a){r(n,e,a),l(e,t)},p(n,e){68&e[0]&&a!==(a=n[6][n[2]]+"")&&g(t,a)},d(n){n&&s(e)}}}function dn(n){let e,t,i,o,c,d;function p(n,e){return n[4].length<3?fn:n[9][0]&&n[2]?mn:n[9][0]?pn:hn}let g=p(n),w=g(n);return{c(){e=u("div"),t=u("input"),i=h(),o=u("ul"),w.c(),f(t,"type","text"),f(t,"placeholder",""),f(t,"autocomplete","false"),f(t,"class","svelte-qdzmwx"),f(o,"class","svelte-qdzmwx"),f(e,"id","dropdown"),b(e,"top","0"),f(e,"class","svelte-qdzmwx")},m(a,s){r(a,e,s),l(e,t),v(t,n[4]),n[23](t),l(e,i),l(e,o),w.m(o,null),n[30](e),c||(d=[m(t,"input",n[22]),m(t,"keyup",n[16])],c=!0)},p(n,e){16&e[0]&&t.value!==n[4]&&v(t,n[4]),g===(g=p(n))&&w?w.p(n,e):(w.d(1),w=g(n),w&&(w.c(),w.m(o,null)))},d(t){t&&s(e),n[23](null),w.d(),n[30](null),c=!1,a(d)}}}function hn(e){let t;return{c(){t=u("li"),t.textContent="No results",f(t,"class","svelte-qdzmwx")},m(n,e){r(n,t,e)},p:n,d(n){n&&s(t)}}}function pn(n){let e,t=n[9],a=[];for(let e=0;e<t.length;e+=1)a[e]=gn(ln(n,t,e));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=p()},m(n,t){for(let e=0;e<a.length;e+=1)a[e].m(n,t);r(n,e,t)},p(n,i){if(11010&i[0]){let o;for(t=n[9],o=0;o<t.length;o+=1){const l=ln(n,t,o);a[o]?a[o].p(l,i):(a[o]=gn(l),a[o].c(),a[o].m(e.parentNode,e))}for(;o<a.length;o+=1)a[o].d(1);a.length=t.length}},d(n){c(a,n),n&&s(e)}}}function mn(n){let e,t=n[9],a=[];for(let e=0;e<t.length;e+=1)a[e]=vn(rn(n,t,e));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=p()},m(n,t){for(let e=0;e<a.length;e+=1)a[e].m(n,t);r(n,e,t)},p(n,i){if(11014&i[0]){let o;for(t=n[9],o=0;o<t.length;o+=1){const l=rn(n,t,o);a[o]?a[o].p(l,i):(a[o]=vn(l),a[o].c(),a[o].m(e.parentNode,e))}for(;o<a.length;o+=1)a[o].d(1);a.length=t.length}},d(n){c(a,n),n&&s(e)}}}function fn(e){let t;return{c(){t=u("li"),t.textContent="Type a name...",f(t,"class","svelte-qdzmwx")},m(n,e){r(n,t,e)},p:n,d(n){n&&s(t)}}}function gn(n){let e,t,i,o,c,p=n[32][n[1]]+"",v=n[34];function b(){return n[27](n[32])}function y(){return n[28](n[34])}const x=()=>n[29](e,v),$=()=>n[29](null,v);return{c(){e=u("li"),t=d(p),i=h(),f(e,"class","svelte-qdzmwx"),w(e,"highlight",n[8]==n[34])},m(n,a){r(n,e,a),l(e,t),l(e,i),x(),o||(c=[m(e,"click",b),m(e,"mouseover",y)],o=!0)},p(a,i){n=a,514&i[0]&&p!==(p=n[32][n[1]]+"")&&g(t,p),v!==n[34]&&($(),v=n[34],x()),256&i[0]&&w(e,"highlight",n[8]==n[34])},d(n){n&&s(e),$(),o=!1,a(c)}}}function vn(n){let e,t,i,o,c,p,v,b,y=n[32][n[1]]+"",x=n[32][n[2]]+"",$=n[34];function C(){return n[24](n[32])}function D(){return n[25](n[34])}const T=()=>n[26](e,$),k=()=>n[26](null,$);return{c(){e=u("li"),t=d(y),i=h(),o=u("small"),c=d(x),p=h(),f(o,"class","svelte-qdzmwx"),f(e,"class","svelte-qdzmwx"),w(e,"highlight",n[8]==n[34])},m(n,a){r(n,e,a),l(e,t),l(e,i),l(e,o),l(o,c),l(e,p),T(),v||(b=[m(e,"click",C),m(e,"mouseover",D)],v=!0)},p(a,i){n=a,514&i[0]&&y!==(y=n[32][n[1]]+"")&&g(t,y),516&i[0]&&x!==(x=n[32][n[2]]+"")&&g(c,x),$!==n[34]&&(k(),$=n[34],T()),256&i[0]&&w(e,"highlight",n[8]==n[34])},d(n){n&&s(e),k(),v=!1,a(b)}}}function bn(e){let t,a,i,o;function c(n,e){return n[6]&&!n[3]?cn:sn}let d=c(e),p=d(e),g=e[7]&&dn(e);return{c(){t=u("div"),p.c(),a=h(),g&&g.c(),f(t,"id","select"),f(t,"class","svelte-qdzmwx"),w(t,"active",e[7])},m(n,s){r(n,t,s),p.m(t,null),l(t,a),g&&g.m(t,null),i||(o=m(t,"keydown",e[15]),i=!0)},p(n,e){d===(d=c(n))&&p?p.p(n,e):(p.d(1),p=d(n),p&&(p.c(),p.m(t,a))),n[7]?g?g.p(n,e):(g=dn(n),g.c(),g.m(t,null)):g&&(g.d(1),g=null),128&e[0]&&w(t,"active",n[7])},i:n,o:n,d(n){n&&s(t),p.d(),g&&g.d(),i=!1,o()}}}function wn(n,e,t){let a;const i=C();let o,l,r,{options:s}=e,{selected:c=null}=e,{placeholder:u="Find an area..."}=e,{value:d="code"}=e,{label:h="name"}=e,{group:p=null}=e,{search:m=!1}=e,f=c,g=c?s.find((n=>{n[d],c[d]})):null,v=!1,b="",w=null,y=[];function x(n){t(17,c=n),t(7,v=!1),i("select",{selected:n,value:n[d]})}return n.$$set=n=>{"options"in n&&t(18,s=n.options),"selected"in n&&t(17,c=n.selected),"placeholder"in n&&t(0,u=n.placeholder),"value"in n&&t(19,d=n.value),"label"in n&&t(1,h=n.label),"group"in n&&t(2,p=n.group),"search"in n&&t(3,m=n.search)},n.$$.update=()=>{16&n.$$.dirty[0]&&t(21,a=b?new RegExp(b,"i"):null),2359298&n.$$.dirty[0]&&(t(9,o=a?s.filter((n=>a.test(n[h]))):s),t(8,w=0)),32&n.$$.dirty[0]&&(document.onclick=function(n){n.target!==l&&(t(7,v=!1),t(8,w=0))}),1966080&n.$$.dirty[0]&&f!=c&&(t(6,g=s.find((n=>n[d]==c[d]))),t(20,f=c))},[u,h,p,m,b,l,g,v,w,o,r,y,function(n){var e;n.stopPropagation(),t(4,b=""),t(7,v=!v),(e=10,new Promise((n=>setTimeout(n,e)))).then((()=>{r&&v&&r.focus()}))},x,function(n){n.stopPropagation(),t(17,c=null),t(20,f=null),t(6,g=null),i("select",{selected:null,value:null})},function(n){v&&o[0]&&Number.isInteger(w)&&(38===n.keyCode?(t(8,w-=w>0?1:0),y[w].scrollIntoView({block:"nearest",inline:"start"})):40===n.keyCode&&(t(8,w+=w<o.length-1?1:0),y[w].scrollIntoView({block:"nearest",inline:"end"})))},function(n){o[0]&&Number.isInteger(w)&&13===n.keyCode&&x(o[w])},c,s,d,f,a,function(){b=this.value,t(4,b)},function(n){T[n?"unshift":"push"]((()=>{r=n,t(10,r)}))},n=>x(n),n=>t(8,w=n),function(n,e){T[n?"unshift":"push"]((()=>{y[e]=n,t(11,y)}))},n=>x(n),n=>t(8,w=n),function(n,e){T[n?"unshift":"push"]((()=>{y[e]=n,t(11,y)}))},function(n){T[n?"unshift":"push"]((()=>{l=n,t(5,l)}))}]}class yn extends B{constructor(n){super(),P(this,n,wn,bn,o,{options:18,selected:17,placeholder:0,value:19,label:1,group:2,search:3},[-1,-1])}}function xn(e){let t;return{c(){t=u("div"),t.innerHTML="<strong>Warning!</strong> This is a prototype. Data likely to contain inaccuracies.",f(t,"class","warning svelte-srzfvi")},m(n,e){r(n,t,e)},p:n,i:n,o:n,d(n){n&&s(t)}}}class $n extends B{constructor(n){super(),P(this,n,null,xn,o,{})}}function Cn(n){let e,t,a,i=n[4](n[0])+"",o=n[3](n[0])+"";return{c(){e=u("div"),t=h(),a=u("div"),b(e,"font-weight","600")},m(n,l){r(n,e,l),e.innerHTML=i,r(n,t,l),r(n,a,l),a.innerHTML=o},p(n,t){1&t&&i!==(i=n[4](n[0])+"")&&(e.innerHTML=i),1&t&&o!==(o=n[3](n[0])+"")&&(a.innerHTML=o)},d(n){n&&s(e),n&&s(t),n&&s(a)}}}function Dn(e){let t,a,i,o,c,d,g=e[1]&&Cn(e);return{c(){t=u("script"),i=h(),g&&g.c(),o=p(),t.src!==(a="https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")&&f(t,"src","https://unpkg.com/rosaenlg@3.0.1/dist/rollup/rosaenlg_tiny_en_US_3.0.1_comp.js")},m(n,a){l(document.head,t),r(n,i,a),g&&g.m(n,a),r(n,o,a),c||(d=m(t,"load",e[2]),c=!0)},p(n,[e]){n[1]?g?g.p(n,e):(g=Cn(n),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null)},i:n,o:n,d(n){s(t),n&&s(i),g&&g.d(n),n&&s(o),c=!1,d()}}}function Tn(n,e,t){let{place:a}=e,i=!1;return n.$$set=n=>{"place"in n&&t(0,a=n.place)},[a,i,()=>{t(1,i=!0)},function(n){let e=n.priority2018.Highest.map((n=>(n.pos="improvement",n))),t=n.priority2018.Lowest.map((n=>(n.pos="decline",n))),a=e.concat(t).filter((n=>"Subdomain"==n["Index level"]&"Unemployment"!=n.Measure)),i=[];a.sort((function(n,e){return n.hlRank-e.hlRank})),console.log("place",n),console.log("subDomains",a);for(const n of a)"Rank"==n.hlRankType?n.Change3year<0?i.push("decline"):i.push("improvement"):i.push(n.pos);function o(n){let e=[];for(let t=0;t<a.length;t++){let i=n[a[t].Domain].subdomains[a[t].Subdomain].indicators,o=[];for(const[n,e]of Object.entries(i))e.indi=n,o.push({}),o[o.length-1]=e;o.sort((function(n,e){return"Change1year Rank"==a[t].hlRankType?e[2018].Change1year-n[2018].Change1year:e[2018].Change3year-n[2018].Change3year})),e.push(o)}return e}return console.log("indicatorRank(place.data)",o(n.data)),rosaenlg_en_US.render("\nmixin intro\n    synz\n        syn\n            | #[+value(place.name)] saw England’s\n\nmixin firstSen(i)\n    | #[+value(place.name)] \n    if (subDomain[i].hlRankType==\"Rank\")\n        | has England's\n        | #[+value(subDomain[i].hlRank, {'ORDINAL_TEXTUAL':true})] \n        if (subDomain[i].pos==\"improvement\")\n            | highest score for\n        else\n            | lowest score for\n    else\n        | saw England’s\n        | #[+value(subDomain[i].hlRank, {'ORDINAL_TEXTUAL':true})] greatest #[+value(subDomain[i].pos)] in \n    i #[+value((subDomain[i].Measure).toLowerCase())] \n    i \n    if (subDomain[i].hlRankType==\"Change1year Rank\")\n        | between 2017 and 2018 \n    else if (subDomain[i].hlRankType==\"Change3year Rank\")\n        | in the three years between 2015 and 2018\n    | .\n\nmixin subd(i)\n    | #[+value(subDomain[i].Measure)] \n    | is a subdomain of \n    | #[+value(subDomain[i].Domain)]\n    | which looks at\n    eachz indic in Object.keys(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].indicators) with { separator:',', last_separator:'and' }\n        i #[+value(indic.toLowerCase())]\n        i\n    | .\n\nmixin topBot(i, yr)\n    if (place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[yr].Rank<76)\n        | top \n        | #[+value(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[yr].Rank/149, {'FORMAT': '0%'})]\n    else\n        | bottom\n        | #[+value((150-place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[yr].Rank)/149, {'FORMAT': '0%'})]\n\nmixin secondSen(i)\n    if (subDomain[i].hlRankType==\"Change1year Rank\")\n        | From 2017 to 2018,\n        | #[+value(place.name)] went from \n        | #[+topBot(i, 2017)]\n        | (#[+value(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[2017].value, {'FORMAT': '0.0'})]) \n    else\n        | From 2015 to 2018,\n        | #[+value(place.name)] went from \n        | #[+topBot(i, 2015)]\n        | (#[+value(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[2015].value, {'FORMAT': '0.0'})])\n    | to \n    | #[+topBot(i, 2018)]  \n    | (#[+value(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[2018].value, {'FORMAT': '0.0'})])\n    | for \n    | #[+value(subDomain[i].Measure.toLowerCase())]\n    if !(subDomain[i].hlRankType==\"Rank\")\n        | , giving it England’s \n        if (place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[2018].Rank<76)\n            | #[+value(place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[2018].Rank, {'ORDINAL_TEXTUAL':true})] \n            | highest score\n        else\n            | #[+value(150-place.data[subDomain[i].Domain].subdomains[subDomain[i].Measure].total[2018].Rank, {'ORDINAL_TEXTUAL':true})] \n            | lowest score\n    | .\n\nmixin declineImp(i, change, index, impDec)\n    if (impDec==\"improvement\")\n        if (negs.includes((indicators[i][index].indi).toLowerCase()))\n            | a decline in \n            | #[+value((indicators[i][index].indi).toLowerCase())] \n            | (index improved by #[+value(indicators[i][index][2018][change])])\n        else\n            | improvements in \n            | #[+value((indicators[i][index].indi).toLowerCase())] \n            | (#[+value(indicators[i][index][2018][change], {'FORMAT': '+0.0'})])\n    else\n        if (negs.includes((indicators[i][indicators[i].length-1-index].indi).toLowerCase()))\n            | an increase in \n            | #[+value((indicators[i][indicators[i].length-1-index].indi).toLowerCase())] \n            | (index went down by #[+value(indicators[i][indicators[i].length-1-index][2018][change], {'FORMAT': '+0.0'})])\n        else\n            | a decline in \n            | #[+value((indicators[i][indicators[i].length-1-index].indi).toLowerCase())] \n            | (#[+value(indicators[i][indicators[i].length-1-index][2018][change], {'FORMAT': '+0.0'})])\n\nmixin however(i, change, impDec)\n    if (impDec==\"improvement\")\n        if (indicators[i][indicators[i].length-1][2018][change]<0)\n            if (negs.includes((indicators[i][indicators[i].length-1].indi).toLowerCase()))\n                | , however there was also an increase in\n                | #[+value((indicators[i][indicators[i].length-1].indi).toLowerCase())]\n                | (index moved down #[+value(Math.abs(indicators[i][indicators[i].length-1][2018][change]))])\n            else\n                | , however there was a decline in\n                | #[+value((indicators[i][indicators[i].length-1].indi).toLowerCase())]\n                | (#[+value(indicators[i][indicators[i].length-1][2018][change], {'FORMAT': '+0.0'})])\n    else\n        if (indicators[i][indicators[i].length-1][2018][change]>0)\n            if (negs.includes((indicators[i][indicators[i].length-1].indi).toLowerCase()))\n                | , however there was an improvement in\n                | #[+value((indicators[i][0].indi).toLowerCase())]\n                | (#[+value(indicators[i][0][2018][change], {'FORMAT': '+0.0'})])\n            else\n                | , however there was an decrease in\n                | #[+value((indicators[i][0].indi).toLowerCase())]\n                | (#[+value(indicators[i][0][2018][change], {'FORMAT': '+0.0'})])\n\nmixin driven(i, change, impDec)\n    | #[+declineImp(i, change, 0, impDec)] and\n    | #[+declineImp(i, change, 1, impDec)]\n    | #[+however(i, change, impDec)]\n    | .\n\nmixin lastSen(i)\n    | This change was largely driven by \n    if (subDomain[i].hlRankType==\"Change1year Rank\")\n        | #[+driven(i, \"Change1year\", imprDecl[i])]\n    else\n        | #[+driven(i, \"Change3year\", imprDecl[i])]\n\nmixin para(i)\n    p #[+firstSen(i)]\n    p #[+subd(i)]\n    p #[+secondSen(i)]\n    p #[+lastSen(i)]\n\nhr\np < MAIN INDEX GRAPHS >\nhr\np #[+para(0)]\nhr\np < CHART >\nhr\np #[+para(1)]\nhr\np < CHART >\nhr\np #[+para(2)]\nhr\np < CHART >\nhr\np #[+para(3)]\nhr\np < CHART >\n",{language:"en_UK",place:n,subDomain:a,negs:["smoking","anxiety","alcohol misuse","neighbourhood noise","air pollution","depression","self-harm","suicides"],imprDecl:i,indicators:o(n.data)})},function(n){return rosaenlg_en_US.render("\nmixin updown\n    if (place.data.Overall.total[2018].Change1year > 0)\n        | up\n    else if (place.data.Overall.total[2018].Change1year < 0)\n        | down\n\nmixin sidDiff\n    // This needs to be replaced with a calculation for significant difference when we reieve the data, -0.4 was the national ave change\n    if (Math.abs(place.data.Overall.total[2018].Change1year-(-0.4))<0.3)\n        | a decline inline with the average across England.\n    else if (place.data.Overall.total[2018].Change1year-(-0.4)<-0.3)\n        | a slightly greater decline than the average across England.\n\np\n    | #[+value(place.name)] \n    | has an overall health index of \n    | #[+value(place.data.Overall.total[2018].value)].\n    | This is determined by scores for three domains; \n    | Healthy Lives (#[+value(place.data['Healthy Lives'].total[2018].value)]), \n    | Healthy People (#[+value(place.data['Healthy People'].total[2018].value)]) and \n    | Healthy Places (#[+value(place.data['Healthy Places'].total[2018].value)]).\n\np \n    | #[+value(place.name)] \n    | was ranked \n    | #[+value(place.data.Overall.total[2018].Rank, {'ORDINAL_NUMBER':true })] \n    | healthiest out of 149 districts in England. It's index score was \n    | #[+updown] \n    | #[+value(Math.abs(place.data.Overall.total[2018].Change1year/100), {'FORMAT': '0.0%'})]\n    | on last year;\n    | #[+sidDiff]\n\np\n    | A score of 100 equates to the average across England when the index was first calculated in 2015.\n",{language:"en_UK",place:n})}]}class kn extends B{constructor(n){super(),P(this,n,Tn,Dn,o,{place:0})}}let Rn={};function An(n,e,t){const a=n.slice();return a[14]=e[t],a[16]=t,a}function _n(n,e,t){const a=n.slice();return a[17]=e[t],a[16]=t,a}function Ln(n){let e,t,a,i,o,c,p,m,v,w,y,x,$,C,D,k,A,_,L,O,M,N,E,j,H,F,P,B,X=n[3].name+"",V=n[2].name+"",Z=n[3].parents[0]&&On(n),K=n[3].parents[0]&&Nn(n);function W(e){n[8](e)}let G={options:n[0],group:"typenm",search:!0};void 0!==n[1]&&(G.selected=n[1]),k=new yn({props:G}),T.push((()=>function(n,e,t){const a=n.$$.props[e];void 0!==a&&(n.$$.bound[a]=t,t(n.$$.ctx[a]))}(k,"selected",W))),k.$on("select",n[9]),N=new kn({props:{place:n[2]}});let J=n[3].children[0]&&En(n);return{c(){e=u("div"),t=u("div"),Z&&Z.c(),a=h(),i=d(X),o=h(),c=u("div"),p=u("div"),m=u("span"),v=d("Health Index:  "),w=d(V),y=u("br"),x=h(),K&&K.c(),$=h(),C=u("div"),D=u("div"),U(k.$$.fragment),_=h(),L=u("div"),O=u("br"),M=h(),U(N.$$.fragment),E=h(),j=u("hr"),H=h(),J&&J.c(),F=h(),P=u("div"),P.innerHTML='<div><img src="https://onsvisual.github.io/svelte-scrolly/img/ons-logo-pos-en.svg" alt="Office for National Statistics" class="svelte-1nsx7bh"/></div> \n\t<div class="right svelte-1nsx7bh"><span class="text-small svelte-1nsx7bh">Source: Census 2011, with change +/- from Census 2001.</span></div>',f(t,"class","text-small svelte-1nsx7bh"),f(e,"class","grid svelte-1nsx7bh"),f(m,"class","text-big svelte-1nsx7bh"),b(D,"width","240px"),b(D,"float","right"),f(c,"class","grid-2 svelte-1nsx7bh"),f(L,"class","profile-grid mt svelte-1nsx7bh"),f(P,"class","grid-2 mt svelte-1nsx7bh")},m(n,s){r(n,e,s),l(e,t),Z&&Z.m(t,null),l(t,a),l(t,i),r(n,o,s),r(n,c,s),l(c,p),l(p,m),l(m,v),l(m,w),l(p,y),l(p,x),K&&K.m(p,null),l(c,$),l(c,C),l(C,D),q(k,D,null),r(n,_,s),r(n,L,s),l(L,O),l(L,M),q(N,L,null),l(L,E),l(L,j),r(n,H,s),J&&J.m(n,s),r(n,F,s),r(n,P,s),B=!0},p(n,e){n[3].parents[0]?Z?Z.p(n,e):(Z=On(n),Z.c(),Z.m(t,a)):Z&&(Z.d(1),Z=null),(!B||8&e)&&X!==(X=n[3].name+"")&&g(i,X),(!B||4&e)&&V!==(V=n[2].name+"")&&g(w,V),n[3].parents[0]?K?K.p(n,e):(K=Nn(n),K.c(),K.m(p,null)):K&&(K.d(1),K=null);const o={};var l;1&e&&(o.options=n[0]),!A&&2&e&&(A=!0,o.selected=n[1],l=()=>A=!1,R.push(l)),k.$set(o);const r={};4&e&&(r.place=n[2]),N.$set(r),n[3].children[0]?J?J.p(n,e):(J=En(n),J.c(),J.m(F.parentNode,F)):J&&(J.d(1),J=null)},i(n){B||(S(k.$$.fragment,n),S(N.$$.fragment,n),B=!0)},o(n){I(k.$$.fragment,n),I(N.$$.fragment,n),B=!1},d(n){n&&s(e),Z&&Z.d(),n&&s(o),n&&s(c),K&&K.d(),z(k),n&&s(_),n&&s(L),z(N),n&&s(H),J&&J.d(n),n&&s(F),n&&s(P)}}}function On(n){let e,t=n[3].parents.reverse(),a=[];for(let e=0;e<t.length;e+=1)a[e]=Mn(_n(n,t,e));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=p()},m(n,t){for(let e=0;e<a.length;e+=1)a[e].m(n,t);r(n,e,t)},p(n,i){if(40&i){let o;for(t=n[3].parents.reverse(),o=0;o<t.length;o+=1){const l=_n(n,t,o);a[o]?a[o].p(l,i):(a[o]=Mn(l),a[o].c(),a[o].m(e.parentNode,e))}for(;o<a.length;o+=1)a[o].d(1);a.length=t.length}},d(n){c(a,n),n&&s(e)}}}function Mn(n){let e,t,a,i,o,c,h,v=n[17].name+"";function b(){return n[7](n[17])}return{c(){e=u("a"),t=d(v),o=p(),f(e,"href",a="#"+n[17].code),f(e,"class","svelte-1nsx7bh"),i=new y(o)},m(n,a){r(n,e,a),l(e,t),i.m(" &gt; ",n,a),r(n,o,a),c||(h=m(e,"click",b),c=!0)},p(i,o){n=i,8&o&&v!==(v=n[17].name+"")&&g(t,v),8&o&&a!==(a="#"+n[17].code)&&f(e,"href",a)},d(n){n&&s(e),n&&s(o),n&&i.d(),c=!1,h()}}}function Nn(n){let e,t,a,i=on[n[3].type].name+"",o=n[3].parents[n[3].parents.length-1].name+"";return{c(){e=d(i),t=d(" in "),a=d(o)},m(n,i){r(n,e,i),r(n,t,i),r(n,a,i)},p(n,t){8&t&&i!==(i=on[n[3].type].name+"")&&g(e,i),8&t&&o!==(o=n[3].parents[n[3].parents.length-1].name+"")&&g(a,o)},d(n){n&&s(e),n&&s(t),n&&s(a)}}}function En(n){let e,t,a,i,o,p,m,v,b,w=n[3].children[0].typepl+"",y=n[3].name+"",x=n[3].children,$=[];for(let e=0;e<x.length;e+=1)$[e]=jn(An(n,x,e));return{c(){e=u("div"),t=u("div"),a=u("span"),i=d(w),o=d(" within "),p=d(y),m=u("br"),v=h(),b=u("span");for(let n=0;n<$.length;n+=1)$[n].c();f(a,"class","text-label svelte-1nsx7bh"),f(b,"class","text-small svelte-1nsx7bh"),f(e,"class","grid mt svelte-1nsx7bh")},m(n,s){r(n,e,s),l(e,t),l(t,a),l(a,i),l(a,o),l(a,p),l(t,m),l(t,v),l(t,b);for(let n=0;n<$.length;n+=1)$[n].m(b,null)},p(n,e){if(8&e&&w!==(w=n[3].children[0].typepl+"")&&g(i,w),8&e&&y!==(y=n[3].name+"")&&g(p,y),40&e){let t;for(x=n[3].children,t=0;t<x.length;t+=1){const a=An(n,x,t);$[t]?$[t].p(a,e):($[t]=jn(a),$[t].c(),$[t].m(b,null))}for(;t<$.length;t+=1)$[t].d(1);$.length=x.length}},d(n){n&&s(e),c($,n)}}}function jn(n){let e,t,a,i,o,c,h=n[14].name+"",p=n[16]<n[3].children.length-1?", ":"";function v(){return n[10](n[14])}return{c(){e=u("a"),t=d(h),i=d(p),f(e,"href",a="#"+n[14].code),f(e,"class","svelte-1nsx7bh")},m(n,a){r(n,e,a),l(e,t),r(n,i,a),o||(c=m(e,"click",v),o=!0)},p(o,l){n=o,8&l&&h!==(h=n[14].name+"")&&g(t,h),8&l&&a!==(a="#"+n[14].code)&&f(e,"href",a),8&l&&p!==(p=n[16]<n[3].children.length-1?", ":"")&&g(i,p)},d(n){n&&s(e),n&&s(i),o=!1,c()}}}function Hn(n){let e,t,i,o;e=new $n({});let l=n[3]&&n[4]&&Ln(n);return{c(){U(e.$$.fragment),t=h(),l&&l.c(),i=p()},m(n,a){q(e,n,a),r(n,t,a),l&&l.m(n,a),r(n,i,a),o=!0},p(n,[e]){n[3]&&n[4]?l?(l.p(n,e),24&e&&S(l,1)):(l=Ln(n),l.c(),S(l,1),l.m(i.parentNode,i)):l&&(H={r:0,c:[],p:H},I(l,1,1,(()=>{l=null})),H.r||a(H.c),H=H.p)},i(n){o||(S(e.$$.fragment,n),S(l),o=!0)},o(n){I(e.$$.fragment,n),I(l),o=!1},d(n){z(e,n),n&&s(t),l&&l.d(n),n&&s(i)}}}function Sn(n,e,t){let a,i,o,l,r;function s(n){fetch(en+n+".json").then((n=>n.json())).then((e=>{e.children=a.filter((e=>e.parent==n)),e.count>20?fetch(an+e.type+".json").then((n=>n.json())).then((n=>{t(3,l=e)})):t(3,l=e)}))}function c(n){fetch(tn+n+".json").then((n=>n.json())).then((n=>{t(2,o=n),console.log("Place Health",o)}))}(async function(n){let e=await fetch(n),t=await e.text();return await J(t,Y)})(nn).then((n=>{n.forEach((n=>{n.typepl=on[n.type].pl,n.typenm=on[n.type].name})),t(0,a=n.sort(((n,e)=>n.name.localeCompare(e.name)))),t(1,i=a.find((n=>"Barnet"==n.name))),function(){const n="K04000001";fetch(en+n+".json").then((n=>n.json())).then((e=>{e.children=a.filter((e=>e.parent==n)),t(4,r=e)}))}(),s(i.code),c(i.code)}));return[a,i,o,l,r,s,c,n=>s(n.code),function(n){i=n,t(1,i)},()=>{i&&c(i.code)},n=>s(n.code)]}[{varCode:"ranking_1_sent",comment:"TOTAL POPULATION",template:"{Current?:{Change1year?Between 2017 and 2018,:In the three years from 2015 to 2018,}}{firstPara? {ladName}:{Current?This area: this area}} {Current?has:saw} England's {ordinalSuffix} {Current?highest score for:{rankIsNegative?greatest decline:greatest improvement in}} {measure}."},{varCode:"domain_1_sent",comment:"POPULATION CHANGE",template:"Barnet has a health index score of 100, the 32nd healthiest district in England."},{varCode:"domain_2_sent",comment:"PROPORTION OVER 65",template:"Barnet's overall health has improved since scoring 99 in 2015."}].forEach((n=>{Rn[n.varCode]=n.template}));return new class extends B{constructor(n){super(),P(this,n,Sn,Hn,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
